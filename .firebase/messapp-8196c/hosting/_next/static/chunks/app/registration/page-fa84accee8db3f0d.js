(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[204],{2205:function(e,t,r){Promise.resolve().then(r.t.bind(r,1451,23)),Promise.resolve().then(r.bind(r,6857))},4531:function(e,t,r){"use strict";let n=(0,r(5236).ZF)({apiKey:"AIzaSyBc3QqyCMr9f3qs8JAXnD1Y9XVKRwHhTbE",authDomain:"messapp-8196c.firebaseapp.com",projectId:"messapp-8196c",storageBucket:"messapp-8196c.appspot.com",messagingSenderId:"623695759792",appId:"1:623695759792:web:2be2766b2c922d0ea42e75"});t.Z=n},9626:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(7437),s=r(4848),i=r.n(s);function o(e){let{type:t,placeholder:r,name:s,errorType:o,touched:a,value:l,onBlur:u,handleChange:c}=e;return(0,n.jsxs)("section",{className:i().formItemSection,children:[(0,n.jsx)("input",{id:s,name:s,type:t,placeholder:r,onBlur:u,onChange:c,value:l,className:i().formItemSection__item}),(0,n.jsx)("span",{className:i().formItemSection__errorText,children:a&&o?(0,n.jsx)("div",{children:o}):null})]})}},9115:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(7437),s=r(1415),i=r.n(s);function o(e){let{btnText:t,btnColor:r}=e,s={};return s="gradient"===r?{backgroundImage:"linear-gradient(90deg, #0069e5 0%, #00ddeb 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}:"solid"===r?{color:"#0069E5"}:{color:"#EC6446"},(0,n.jsx)("button",{type:"submit",className:i().btnMainAction,style:s,children:t})}},1272:function(e,t,r){"use strict";function n(e){let{errorCode:t,errorType:r}=e,n=!1;return t.includes(r)&&(n=!0),n}r.d(t,{Z:function(){return n}})},3646:function(e,t,r){"use strict";function n(e){for(let t in e)e[t]=e[t].trim()}r.d(t,{r:function(){return n}})},1350:function(e,t,r){"use strict";r.d(t,{ZP:function(){return o},fz:function(){return i},qy:function(){return s}});let n=(0,r(6862).oM)({name:"authSlice",initialState:{userAlreadyExist:!1,loginInvalidCred:!1},reducers:{setUserAlreadyExist(e,t){e.userAlreadyExist=t.payload},setLoginInvalidCred(e,t){e.loginInvalidCred=t.payload}}}),{setUserAlreadyExist:s,setLoginInvalidCred:i}=n.actions;var o=n.reducer},8294:function(e,t,r){"use strict";r.d(t,{ZP:function(){return i},wt:function(){return s}});let n=(0,r(6862).oM)({name:"formSlice",initialState:{isLoading:!1},reducers:{setIsLoading(e,t){e.isLoading=t.payload}}}),{setIsLoading:s}=n.actions;var i=n.reducer},5027:function(e,t,r){"use strict";r.d(t,{C:function(){return i},T:function(){return s}});var n=r(1444);let s=n.I0.withTypes(),i=n.v9.withTypes()},6857:function(e,t,r){"use strict";r.d(t,{default:function(){return S}});var n=r(7437),s=r(7138),i=r(6463),o=r(2265),a=r(9381),l=r(9626),u=r(8682),c=r.n(u);function d(e){let{errors:t,value:r,touched:s,onBlur:i,handleChange:o}=e;return(0,n.jsxs)("div",{className:c().formInputs,children:[(0,n.jsx)(l.Z,{type:"text",placeholder:"Имя",name:"firstName",errorType:t.firstName,touched:s.firstName,value:r.firstName,onBlur:i,handleChange:o}),(0,n.jsx)(l.Z,{type:"text",placeholder:"Фамилия",name:"lastName",errorType:t.lastName,touched:s.lastName,value:r.lastName,onBlur:i,handleChange:o}),(0,n.jsx)(l.Z,{type:"email",placeholder:"Email",name:"email",errorType:t.email,touched:s.email,value:r.email,onBlur:i,handleChange:o}),(0,n.jsx)(l.Z,{type:"phone",placeholder:"Номер телеофна",name:"phone",errorType:t.phone,touched:s.phone,value:r.phone,onBlur:i,handleChange:o}),(0,n.jsx)(l.Z,{type:"password",placeholder:"Пароль",name:"password",errorType:t.password,touched:s.password,value:r.password,onBlur:i,handleChange:o}),(0,n.jsx)(l.Z,{type:"password",placeholder:"Подтвердите пароль",name:"confirmPassword",errorType:t.confirmPassword,touched:s.confirmPassword,value:r.confirmPassword,onBlur:i,handleChange:o})]})}var m=r(9115),f=r(5619),p=r.n(f),h=r(4531),_=r(2440),g=r(1272),x=r(8294),y=r(5027),b=r(1350),v=r(4245);let w=()=>{let e="* Поле обязательно для заполнения";return v.Ry({firstName:v.Z_().max(20,"Должно быть 20 символов или меньше").required(e).trim(),lastName:v.Z_().max(25,"Должно быть 25 символов или меньше").required(e).trim(),phone:v.Z_().matches(/^(\+7|7|8)?[\s\-]?\(?[489][0-9]{2}\)?[\s\-]?[0-9]{3}[\s\-]?[0-9]{2}[\s\-]?[0-9]{2}$/,"Номер начинается с 8 или +7").required(e).trim(),email:v.Z_().email("Invalid email address").required(e).trim(),password:v.Z_().required("Password is required").min(5,"Your password is too short.").matches(/[a-zA-Z]/,"Password can only contain Latin letters."),confirmPassword:v.Z_().oneOf([v.iH("password")],"Passwords must match")})};var I=r(3646);function S(){let e=(0,i.useRouter)(),t=(0,y.C)(e=>e.authState.userAlreadyExist),r=(0,a.TA)({initialValues:{firstName:"",lastName:"",phone:"",email:"",password:"",confirmPassword:""},validationSchema:w,onSubmit:e=>{(0,I.r)(e),r.setSubmitting(!1)}}),l=function(e){let{isSubmitting:t,isValid:r,email:n,password:s}=e,[i,a]=(0,o.useState)(!1),l=(0,y.T)();if(l((0,x.wt)(!0)),t&&r){let e=(0,_.v0)(h.Z);(0,_.Xb)(e,n,s).then(e=>{e.user,a(!0)}).catch(e=>{let t=e.code,r=(0,g.Z)({errorCode:t,errorType:"already-in-use"});(0,b.qy)(r),a(!1)}).finally(()=>{l((0,x.wt)(!1))})}return i}({isSubmitting:r.isSubmitting,isValid:r.isValid,email:r.values.email,password:r.values.password});return(0,o.useEffect)(()=>{l&&e.push("/")},[l,e]),(0,n.jsxs)("form",{className:p().form,onSubmit:r.handleSubmit,children:[t&&(0,n.jsxs)("p",{children:["Пользователь уже зарегистрирован. Попробуйте"," ",(0,n.jsx)(s.default,{href:"/login",children:"войти"})," по логину и паролю"]}),(0,n.jsx)(d,{errors:r.errors,value:r.values,touched:r.touched,handleChange:r.handleChange,onBlur:r.handleBlur}),(0,n.jsxs)("div",{className:p().formBtns,children:[(0,n.jsx)(m.Z,{btnText:"Зарегистрироваться",btnColor:"gradient"}),(0,n.jsx)(s.default,{href:"/login",className:p().formBtns__login,children:(0,n.jsx)(m.Z,{btnText:"Войти",btnColor:"solid"})})]})]})}},4848:function(e){e.exports={formItemSection:"AuthInput_formItemSection__HC80E",formItemSection__item:"AuthInput_formItemSection__item__BMg8S",formItemSection__errorText:"AuthInput_formItemSection__errorText__l_Atb"}},1415:function(e){e.exports={btnMainAction:"BtnMainAction_btnMainAction__UwxiA"}},8682:function(e){e.exports={formInputs:"RegistrInputsList_formInputs__d7GLF"}},1451:function(e){e.exports={registr:"Registration_registr__pQPjv",registr__title:"Registration_registr__title__n96EY"}},5619:function(e){e.exports={form:"RegistrForm_form__bTzt8",formBtns:"RegistrForm_formBtns__ZhuqU",formBtns__login:"RegistrForm_formBtns__login__ayTOS"}}},function(e){e.O(0,[246,137,841,562,53,971,23,744],function(){return e(e.s=2205)}),_N_E=e.O()}]);