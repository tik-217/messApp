(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{4383:function(e,t,n){Promise.resolve().then(n.t.bind(n,7718,23)),Promise.resolve().then(n.bind(n,6613))},4531:function(e,t,n){"use strict";let r=(0,n(5236).ZF)({apiKey:"AIzaSyBc3QqyCMr9f3qs8JAXnD1Y9XVKRwHhTbE",authDomain:"messapp-8196c.firebaseapp.com",projectId:"messapp-8196c",storageBucket:"messapp-8196c.appspot.com",messagingSenderId:"623695759792",appId:"1:623695759792:web:2be2766b2c922d0ea42e75"});t.Z=r},9626:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(7437),i=n(4848),o=n.n(i);function s(e){let{type:t,placeholder:n,name:i,errorType:s,touched:a,value:u,onBlur:l,handleChange:c}=e;return(0,r.jsxs)("section",{className:o().formItemSection,children:[(0,r.jsx)("input",{id:i,name:i,type:t,placeholder:n,onBlur:l,onChange:c,value:u,className:o().formItemSection__item}),(0,r.jsx)("span",{className:o().formItemSection__errorText,children:a&&s?(0,r.jsx)("div",{children:s}):null})]})}},9115:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(7437),i=n(1415),o=n.n(i);function s(e){let{btnText:t,btnColor:n}=e,i={};return i="gradient"===n?{backgroundImage:"linear-gradient(90deg, #0069e5 0%, #00ddeb 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}:"solid"===n?{color:"#0069E5"}:{color:"#EC6446"},(0,r.jsx)("button",{type:"submit",className:o().btnMainAction,style:i,children:t})}},1272:function(e,t,n){"use strict";function r(e){let{errorCode:t,errorType:n}=e,r=!1;return t.includes(n)&&(r=!0),r}n.d(t,{Z:function(){return r}})},3646:function(e,t,n){"use strict";function r(e){for(let t in e)e[t]=e[t].trim()}n.d(t,{r:function(){return r}})},1350:function(e,t,n){"use strict";n.d(t,{ZP:function(){return s},fz:function(){return o},qy:function(){return i}});let r=(0,n(6862).oM)({name:"authSlice",initialState:{userAlreadyExist:!1,loginInvalidCred:!1},reducers:{setUserAlreadyExist(e,t){e.userAlreadyExist=t.payload},setLoginInvalidCred(e,t){e.loginInvalidCred=t.payload}}}),{setUserAlreadyExist:i,setLoginInvalidCred:o}=r.actions;var s=r.reducer},8294:function(e,t,n){"use strict";n.d(t,{ZP:function(){return o},wt:function(){return i}});let r=(0,n(6862).oM)({name:"formSlice",initialState:{isLoading:!1},reducers:{setIsLoading(e,t){e.isLoading=t.payload}}}),{setIsLoading:i}=r.actions;var o=r.reducer},5027:function(e,t,n){"use strict";n.d(t,{C:function(){return o},T:function(){return i}});var r=n(1444);let i=r.I0.withTypes(),o=r.v9.withTypes()},9362:function(e,t,n){"use strict";n.d(t,{ZP:function(){return o},WG:function(){return i}});let r=(0,n(6862).oM)({name:"userSlice",initialState:{user:{email:""}},reducers:{setUserEmail(e,t){e.user.email=t.payload}}}),{setUserEmail:i}=r.actions;var o=r.reducer},6613:function(e,t,n){"use strict";n.d(t,{default:function(){return j}});var r=n(7437),i=n(2265),o=n(7138),s=n(6463),a=n(5027),u=n(4531),l=n(2440),c=n(1272),d=n(8294),m=n(9362),f=n(1350),_=n(3646),p=n(9381),h=n(4245);let g=()=>{let e=h.Ry({emailOrPhone:h.Z_().trim().required("Поле обязательно для заполнения").test("email_or_phone","Email или телефон некорректны",e=>t(e)||n(parseInt(null!=e?e:"0")))}),t=e=>h.Z_().email().isValidSync(e),n=e=>h.Rx().integer().positive().test(e=>{let t=new RegExp(/^(\+7|7|8)?[\s\-]?\(?[489][0-9]{2}\)?[\s\-]?[0-9]{3}[\s\-]?[0-9]{2}[\s\-]?[0-9]{2}$/);return!!(e&&t.test(e.toString()))}).isValidSync(e);return e};var x=n(9626),b=n(5356),S=n.n(b);function v(e){let{errors:t,value:n,touched:i,onBlur:o,handleChange:s}=e;return(0,r.jsxs)("div",{className:S().formInputs,children:[(0,r.jsx)(x.Z,{type:"text",placeholder:"Email или телефон",name:"emailOrPhone",errorType:t.emailOrPhone,touched:i.emailOrPhone,value:n.emailOrPhone,onBlur:o,handleChange:s}),(0,r.jsx)(x.Z,{type:"password",placeholder:"Пароль",name:"password",errorType:t.password,touched:i.password,value:n.password,onBlur:o,handleChange:s})]})}var I=n(9115),y=n(3517),C=n.n(y);function j(){let e=(0,s.useRouter)(),t=function(){let e=(0,p.TA)({initialValues:{emailOrPhone:"",password:""},validationSchema:g,onSubmit:t=>{(0,_.r)(t),e.setSubmitting(!1)}});return e}(),n=function(e){let{isSubmitting:t,isValid:n,emailOrPhoneValue:r,passwordValue:o}=e,[s,_]=(0,i.useState)(!1),p=(0,a.T)();if(p((0,d.wt)(!0)),t&&n){let e=(0,l.v0)(u.Z);(0,l.e5)(e,r,o).then(e=>{let t=e.user.email;t&&p((0,m.WG)(t)),_(!0)}).catch(e=>{let t=e.code,n=(0,c.Z)({errorCode:t,errorType:"invalid-credential"});p((0,f.fz)(n)),_(!1)}).finally(()=>{p((0,d.wt)(!1))})}return s}({isSubmitting:t.isSubmitting,isValid:t.isValid,emailOrPhoneValue:t.values.emailOrPhone,passwordValue:t.values.password}),h=(0,a.C)(e=>e.formState.isLoading);return(0,i.useEffect)(()=>{n&&e.push("/")},[n,e]),(0,r.jsx)(r.Fragment,{children:h?(0,r.jsxs)("form",{className:C().form,onSubmit:t.handleSubmit,children:[(0,r.jsx)(v,{errors:t.errors,touched:t.touched,value:t.values,onBlur:t.handleBlur,handleChange:t.handleChange}),(0,r.jsx)(I.Z,{btnText:"Войти",btnColor:"gradient"}),(0,r.jsxs)("div",{className:C().formBtns,children:[(0,r.jsx)(o.default,{href:"/registration",className:C().formBtns__item,children:(0,r.jsx)(I.Z,{btnText:"Регистрация",btnColor:"solid"})}),(0,r.jsx)(o.default,{href:"/",className:C().formBtns__item,children:(0,r.jsx)(I.Z,{btnText:"Забыли пароль?",btnColor:"solid"})})]})]}):(0,r.jsx)(r.Fragment,{children:"...Loading"})})}},4848:function(e){e.exports={formItemSection:"AuthInput_formItemSection__HC80E",formItemSection__item:"AuthInput_formItemSection__item__BMg8S",formItemSection__errorText:"AuthInput_formItemSection__errorText__l_Atb"}},1415:function(e){e.exports={btnMainAction:"BtnMainAction_btnMainAction__UwxiA"}},5356:function(e){e.exports={formInputs:"LoginInputsList_formInputs__f_im5"}},7718:function(e){e.exports={login:"Login_login__GqMfY",login__title:"Login_login__title__56CiO"}},3517:function(e){e.exports={form:"Login_form__Dckle",formBtns:"Login_formBtns__NCIY_",formBtns__item:"Login_formBtns__item__uSMkH"}}},function(e){e.O(0,[137,841,562,53,971,23,744],function(){return e(e.s=4383)}),_N_E=e.O()}]);