(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{4383:function(e,t,n){Promise.resolve().then(n.t.bind(n,7718,23)),Promise.resolve().then(n.bind(n,394))},4531:function(e,t,n){"use strict";let r=(0,n(5236).ZF)({apiKey:"AIzaSyBc3QqyCMr9f3qs8JAXnD1Y9XVKRwHhTbE",authDomain:"messapp-8196c.firebaseapp.com",projectId:"messapp-8196c",storageBucket:"messapp-8196c.appspot.com",messagingSenderId:"623695759792",appId:"1:623695759792:web:2be2766b2c922d0ea42e75"});t.Z=r},9626:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(7437),i=n(4848),o=n.n(i);function s(e){let{type:t,placeholder:n,name:i,errorType:s,touched:a,value:l,onBlur:u,handleChange:c}=e;return(0,r.jsxs)("section",{className:o().formItemSection,children:[(0,r.jsx)("input",{id:i,name:i,type:t,placeholder:n,onBlur:u,onChange:c,value:l,className:o().formItemSection__item}),(0,r.jsx)("span",{className:o().formItemSection__errorText,children:a&&s?(0,r.jsx)("div",{children:s}):null})]})}},9115:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(7437),i=n(1415),o=n.n(i);function s(e){let{btnText:t,btnColor:n}=e,i={};return i="gradient"===n?{backgroundImage:"linear-gradient(90deg, #0069e5 0%, #00ddeb 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}:"solid"===n?{color:"#0069E5"}:{color:"#EC6446"},(0,r.jsx)("button",{type:"submit",className:o().btnMainAction,style:i,children:t})}},3646:function(e,t,n){"use strict";function r(e){for(let t in e)e[t]=e[t].trim()}n.d(t,{r:function(){return r}})},8294:function(e,t,n){"use strict";n.d(t,{ZP:function(){return o},wt:function(){return i}});let r=(0,n(6862).oM)({name:"formSlice",initialState:{isLoading:!1},reducers:{setIsLoading(e,t){e.isLoading=t.payload}}}),{setIsLoading:i}=r.actions;var o=r.reducer},5027:function(e,t,n){"use strict";n.d(t,{C:function(){return o},T:function(){return i}});var r=n(1444);let i=r.I0.withTypes(),o=r.v9.withTypes()},9362:function(e,t,n){"use strict";n.d(t,{ZP:function(){return s},qy:function(){return o},WG:function(){return i}});let r=(0,n(6862).oM)({name:"userSlice",initialState:{user:{email:""},userAlreadyExist:!1},reducers:{setUserEmail(e,t){e.user.email=t.payload},setUserAlreadyExist(e,t){e.userAlreadyExist=t.payload}}}),{setUserEmail:i,setUserAlreadyExist:o}=r.actions;var s=r.reducer},394:function(e,t,n){"use strict";n.d(t,{default:function(){return C}});var r=n(7437),i=n(2265),o=n(7138),s=n(6463),a=n(5027),l=n(4531),u=n(9279),c=n(6727);n(3943),n(2680),n(9053),(0,c.r)("Cordova");var m=n(8294),d=n(9362),f=n(3646),_=n(9381),p=n(4245);let h=()=>{let e=p.Ry({emailOrPhone:p.Z_().trim().required("Поле обязательно для заполнения").test("email_or_phone","Email или телефон некорректны",e=>t(e)||n(parseInt(null!=e?e:"0")))}),t=e=>p.Z_().email().isValidSync(e),n=e=>p.Rx().integer().positive().test(e=>{let t=new RegExp(/^(\+7|7|8)?[\s\-]?\(?[489][0-9]{2}\)?[\s\-]?[0-9]{3}[\s\-]?[0-9]{2}[\s\-]?[0-9]{2}$/);return!!(e&&t.test(e.toString()))}).isValidSync(e);return e};var g=n(9626),x=n(5356),b=n.n(x);function v(e){let{errors:t,value:n,touched:i,onBlur:o,handleChange:s}=e;return(0,r.jsxs)("div",{className:b().formInputs,children:[(0,r.jsx)(g.Z,{type:"text",placeholder:"Email или телефон",name:"emailOrPhone",errorType:t.emailOrPhone,touched:i.emailOrPhone,value:n.emailOrPhone,onBlur:o,handleChange:s}),(0,r.jsx)(g.Z,{type:"password",placeholder:"Пароль",name:"password",errorType:t.password,touched:i.password,value:n.password,onBlur:o,handleChange:s})]})}var S=n(9115),I=n(3517),y=n.n(I);function C(){let e=(0,s.useRouter)(),t=(0,_.TA)({initialValues:{emailOrPhone:"",password:""},validationSchema:h,onSubmit:e=>{(0,f.r)(e)}}),n=function(e){let{isSubmitting:t,emailOrPhoneValue:n,passwordValue:r}=e,[o,s]=(0,i.useState)(!1),f=(0,a.T)();if(t){var _,p;let e=(void 0===(_=l.Z)&&(_=(0,u.Mq)()),(p=(0,u.qX)(_,"auth")).isInitialized()?p.getImmediate():(0,c.i)(_,{persistence:c.c,popupRedirectResolver:c.d}));f((0,m.wt)(!0)),(0,c.$)(e,n,r).then(e=>{let t=e.user.email;t&&f((0,d.WG)(t)),s(!0)}).catch(e=>{let t=e.code,n=e.message;console.log(t),console.log(n),s(!1)}).finally(()=>{f((0,m.wt)(!1))})}return o}({isSubmitting:t.isSubmitting,emailOrPhoneValue:t.values.emailOrPhone,passwordValue:t.values.password}),p=(0,a.C)(e=>e.formState.isLoading);return(0,i.useEffect)(()=>{n&&e.push("/")},[n,e]),(0,r.jsx)(r.Fragment,{children:p?(0,r.jsx)(r.Fragment,{children:"...Loading"}):(0,r.jsxs)("form",{className:y().form,onSubmit:e=>t.handleSubmit(e),children:[(0,r.jsx)(v,{errors:t.errors,touched:t.touched,value:t.values,onBlur:t.handleBlur,handleChange:t.handleChange}),(0,r.jsx)(S.Z,{btnText:"Войти",btnColor:"gradient"}),(0,r.jsxs)("div",{className:y().formBtns,children:[(0,r.jsx)(o.default,{href:"/registration",className:y().formBtns__item,children:(0,r.jsx)(S.Z,{btnText:"Регистрация",btnColor:"solid"})}),(0,r.jsx)(o.default,{href:"/",className:y().formBtns__item,children:(0,r.jsx)(S.Z,{btnText:"Забыли пароль?",btnColor:"solid"})})]})]})})}},4848:function(e){e.exports={formItemSection:"AuthInput_formItemSection__HC80E",formItemSection__item:"AuthInput_formItemSection__item__BMg8S",formItemSection__errorText:"AuthInput_formItemSection__errorText__l_Atb"}},1415:function(e){e.exports={btnMainAction:"BtnMainAction_btnMainAction__UwxiA"}},5356:function(e){e.exports={formInputs:"LoginInputsList_formInputs__f_im5"}},7718:function(e){e.exports={login:"Login_login__GqMfY",login__title:"Login_login__title__56CiO"}},3517:function(e){e.exports={form:"Login_form__Dckle",formBtns:"Login_formBtns__NCIY_",formBtns__item:"Login_formBtns__item__uSMkH"}}},function(e){e.O(0,[137,683,562,148,971,23,744],function(){return e(e.s=4383)}),_N_E=e.O()}]);