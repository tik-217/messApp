"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[683],{6727:function(e,t,n){n.d(t,{$:function(){return eY},c:function(){return b},d:function(){return tv},i:function(){return eN},r:function(){return e3}});var r,i,o=n(1735),s=n(9279),a=n(3943),u=n(2680),c=n(9053),h="__sak",l=function(){function e(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return e._getInstance=function(t){var n=this.receivers.find(function(e){return e.isListeningto(t)});if(n)return n;var r=new e(t);return this.receivers.push(r),r},e.prototype.isListeningto=function(e){return this.eventTarget===e},e.prototype.handleEvent=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t,n,r,i,s,a,u,c=this;return(0,o.Jh)(this,function(h){switch(h.label){case 0:if(r=(n=(t=e).data).eventId,i=n.eventType,s=n.data,!(null==(a=this.handlersMap[i])?void 0:a.size))return[2];return t.ports[0].postMessage({status:"ack",eventId:r,eventType:i}),[4,/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){var t=this;return Promise.all(e.map(function(e){return(0,o.mG)(t,void 0,void 0,function(){return(0,o.Jh)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,e];case 1:return[2,{fulfilled:!0,value:t.sent()}];case 2:return[2,{fulfilled:!1,reason:t.sent()}];case 3:return[2]}})})}))}(Array.from(a).map(function(e){return(0,o.mG)(c,void 0,void 0,function(){return(0,o.Jh)(this,function(n){return[2,e(t.origin,s)]})})}))];case 1:return u=h.sent(),t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u}),[2]}})})},e.prototype._subscribe=function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)},e.prototype._unsubscribe=function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)},e.receivers=[],e}(),d=function(){function e(e){this.target=e,this.handlers=new Set}return e.prototype.removeMessageHandler=function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)},e.prototype._send=function(e,t,n){return void 0===n&&(n=50),(0,o.mG)(this,void 0,void 0,function(){var r,i,s,a=this;return(0,o.Jh)(this,function(o){if(!(r="undefined"!=typeof MessageChannel?new MessageChannel:null))throw Error("connection_unavailable");return[2,new Promise(function(o,u){var c=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t){void 0===e&&(e=""),void 0===t&&(t=10);for(var n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}("",20);r.port1.start();var h=setTimeout(function(){u(Error("unsupported_event"))},n);s={messageChannel:r,onMessage:function(e){if(e.data.eventId===c)switch(e.data.status){case"ack":clearTimeout(h),i=setTimeout(function(){u(Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(e.data.response);break;default:clearTimeout(h),clearTimeout(i),u(Error("invalid_response"))}}},a.handlers.add(s),r.port1.addEventListener("message",s.onMessage),a.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(function(){s&&a.removeMessageHandler(s)})]})})},e}();/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f(){return void 0!==window.WorkerGlobalScope&&"function"==typeof window.importScripts}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var p="firebaseLocalStorageDb",v="firebaseLocalStorage",m="fbase_key",g=function(){function e(e){this.request=e}return e.prototype.toPromise=function(){var e=this;return new Promise(function(t,n){e.request.addEventListener("success",function(){t(e.request.result)}),e.request.addEventListener("error",function(){n(e.request.error)})})},e}();function y(e,t){return e.transaction([v],t?"readwrite":"readonly").objectStore(v)}function _(){var e=this,t=indexedDB.open(p,1);return new Promise(function(n,r){t.addEventListener("error",function(){r(t.error)}),t.addEventListener("upgradeneeded",function(){var e=t.result;try{e.createObjectStore(v,{keyPath:m})}catch(e){r(e)}}),t.addEventListener("success",function(){return(0,o.mG)(e,void 0,void 0,function(){var e,r;return(0,o.Jh)(this,function(i){switch(i.label){case 0:if((e=t.result).objectStoreNames.contains(v))return[3,3];return e.close(),[4,new g(indexedDB.deleteDatabase(p)).toPromise()];case 1:return i.sent(),r=n,[4,_()];case 2:return r.apply(void 0,[i.sent()]),[3,4];case 3:n(e),i.label=4;case 4:return[2]}})})})})}function I(e,t,n){return(0,o.mG)(this,void 0,void 0,function(){var r;return(0,o.Jh)(this,function(i){return[2,new g(y(e,!0).put(((r={})[m]=t,r.value=n,r))).toPromise()]})})}function T(e,t){return new g(y(e,!0).delete(t)).toPromise()}var b=function(){function e(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(function(){},function(){})}return e.prototype._openDb=function(){return(0,o.mG)(this,void 0,void 0,function(){var e;return(0,o.Jh)(this,function(t){switch(t.label){case 0:if(this.db)return[2,this.db];return e=this,[4,_()];case 1:return e.db=t.sent(),[2,this.db]}})})},e.prototype._withRetries=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t,n;return(0,o.Jh)(this,function(r){switch(r.label){case 0:t=0,r.label=1;case 1:r.label=2;case 2:return r.trys.push([2,5,,6]),[4,this._openDb()];case 3:return[4,e(r.sent())];case 4:return[2,r.sent()];case 5:if(n=r.sent(),t++>3)throw n;return this.db&&(this.db.close(),this.db=void 0),[3,6];case 6:return[3,1];case 7:return[2]}})})},e.prototype.initializeServiceWorkerMessaging=function(){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(e){return[2,f()?this.initializeReceiver():this.initializeSender()]})})},e.prototype.initializeReceiver=function(){return(0,o.mG)(this,void 0,void 0,function(){var e=this;return(0,o.Jh)(this,function(t){return this.receiver=l._getInstance(f()?self:null),this.receiver._subscribe("keyChanged",function(t,n){return(0,o.mG)(e,void 0,void 0,function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:return[4,this._poll()];case 1:return[2,{keyProcessed:e.sent().includes(n.key)}]}})})}),this.receiver._subscribe("ping",function(t,n){return(0,o.mG)(e,void 0,void 0,function(){return(0,o.Jh)(this,function(e){return[2,["keyChanged"]]})})}),[2]})})},e.prototype.initializeSender=function(){var e,t;return(0,o.mG)(this,void 0,void 0,function(){var n,r;return(0,o.Jh)(this,function(i){switch(i.label){case 0:return n=this,[4,function(){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:if(!(null==navigator?void 0:navigator.serviceWorker))return[2,null];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,navigator.serviceWorker.ready];case 2:return[2,e.sent().active];case 3:return e.sent(),[2,null];case 4:return[2]}})})}()];case 1:if(n.activeServiceWorker=i.sent(),!this.activeServiceWorker)return[2];return this.sender=new d(this.activeServiceWorker),[4,this.sender._send("ping",{},800)];case 2:if(!(r=i.sent()))return[2];return(null===(e=r[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=r[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0),[2]}})})},e.prototype.notifyServiceWorker=function(e){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(t){switch(t.label){case 0:var n;if(!this.sender||!this.activeServiceWorker||((null===(n=null==navigator?void 0:navigator.serviceWorker)||void 0===n?void 0:n.controller)||null)!==this.activeServiceWorker)return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)];case 2:case 3:return t.sent(),[3,4];case 4:return[2]}})})},e.prototype._isAvailable=function(){return(0,o.mG)(this,void 0,void 0,function(){var e;return(0,o.Jh)(this,function(t){switch(t.label){case 0:if(t.trys.push([0,4,,5]),!indexedDB)return[2,!1];return[4,_()];case 1:return[4,I(e=t.sent(),h,"1")];case 2:return t.sent(),[4,T(e,h)];case 3:return t.sent(),[2,!0];case 4:return t.sent(),[3,5];case 5:return[2,!1]}})})},e.prototype._withPendingWrite=function(e){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(t){switch(t.label){case 0:this.pendingWrites++,t.label=1;case 1:return t.trys.push([1,,3,4]),[4,e()];case 2:return t.sent(),[3,4];case 3:return this.pendingWrites--,[7];case 4:return[2]}})})},e.prototype._set=function(e,t){return(0,o.mG)(this,void 0,void 0,function(){var n=this;return(0,o.Jh)(this,function(r){return[2,this._withPendingWrite(function(){return(0,o.mG)(n,void 0,void 0,function(){return(0,o.Jh)(this,function(n){switch(n.label){case 0:return[4,this._withRetries(function(n){return I(n,e,t)})];case 1:return n.sent(),this.localCache[e]=t,[2,this.notifyServiceWorker(e)]}})})})]})})},e.prototype._get=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(n){switch(n.label){case 0:return[4,this._withRetries(function(t){return function(e,t){return(0,o.mG)(this,void 0,void 0,function(){var n;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,new g(y(e,!1).get(t)).toPromise()];case 1:return[2,void 0===(n=r.sent())?null:n.value]}})})}(t,e)})];case 1:return t=n.sent(),this.localCache[e]=t,[2,t]}})})},e.prototype._remove=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t=this;return(0,o.Jh)(this,function(n){return[2,this._withPendingWrite(function(){return(0,o.mG)(t,void 0,void 0,function(){return(0,o.Jh)(this,function(t){switch(t.label){case 0:return[4,this._withRetries(function(t){return T(t,e)})];case 1:return t.sent(),delete this.localCache[e],[2,this.notifyServiceWorker(e)]}})})})]})})},e.prototype._poll=function(){return(0,o.mG)(this,void 0,void 0,function(){var e,t,n,r,i,s,a,u,c,h,l;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,this._withRetries(function(e){return new g(y(e,!1).getAll()).toPromise()})];case 1:if(!(e=o.sent())||0!==this.pendingWrites)return[2,[]];if(t=[],n=new Set,0!==e.length)for(r=0,i=e;r<i.length;r++)a=(s=i[r]).fbase_key,u=s.value,n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(u)&&(this.notifyListeners(a,u),t.push(a));for(c=0,h=Object.keys(this.localCache);c<h.length;c++)l=h[c],this.localCache[l]&&!n.has(l)&&(this.notifyListeners(l,null),t.push(l));return[2,t]}})})},e.prototype.notifyListeners=function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++)(0,i[r])(t)},e.prototype.startPolling=function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(function(){return(0,o.mG)(e,void 0,void 0,function(){return(0,o.Jh)(this,function(e){return[2,this._poll()]})})},800)},e.prototype.stopPolling=function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)},e.prototype._addListener=function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)},e.prototype._removeListener=function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()},e.type="LOCAL",e}();function k(){var e;return(e={})["dependent-sdk-initialized-before-auth"]="Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",e}var w=new a.LL("auth","Firebase",k()),E=new c.Yd("@firebase/auth");function P(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];E.logLevel<=c.in.ERROR&&E.error.apply(E,(0,o.ev)(["Auth (".concat(s.Jn,"): ").concat(e)],t,!1))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];throw A.apply(void 0,(0,o.ev)([e],t,!1))}function R(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return A.apply(void 0,(0,o.ev)([e],t,!1))}function C(e,t,n){var r,i=(0,o.pi)((0,o.pi)({},k()),((r={})[t]=n,r));return new a.LL("auth","Firebase",i).create(t,{appName:e.name})}function N(e){return C(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function A(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if("string"!=typeof e){var i=n[0],s=(0,o.ev)([],n.slice(1),!0);return s[0]&&(s[0].appName=e.name),(t=e._errorFactory).create.apply(t,(0,o.ev)([i],s,!1))}return w.create.apply(w,(0,o.ev)([e],n,!1))}function O(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!e)throw A.apply(void 0,(0,o.ev)([t],n,!1))}function L(e){var t="INTERNAL ASSERTION FAILED: "+e;throw P(t),Error(t)}function U(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var J=function(){function e(e,t){var n;this.shortDelay=e,this.longDelay=t,n="Short delay should be less than long delay!",t>e||L(n),this.isMobile=(0,a.uI)()||(0,a.b$)()}return e.prototype.get=function(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===U()||"https:"===U()||(0,a.ru)()||"connection"in navigator))||navigator.onLine?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(e,t){n=e.emulator,r="Emulator should always be set here",n||L(r);var n,r,i=e.emulator.url;return t?"".concat(i).concat(t.startsWith("/")?t.slice(1):t):i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var M=function(){function e(){}return e.initialize=function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)},e.fetch=function(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void L("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")},e.headers=function(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void L("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")},e.response=function(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void L("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")},e}(),D=((r={}).CREDENTIAL_MISMATCH="custom-token-mismatch",r.MISSING_CUSTOM_TOKEN="internal-error",r.INVALID_IDENTIFIER="invalid-email",r.MISSING_CONTINUE_URI="internal-error",r.INVALID_PASSWORD="wrong-password",r.MISSING_PASSWORD="missing-password",r.INVALID_LOGIN_CREDENTIALS="invalid-credential",r.EMAIL_EXISTS="email-already-in-use",r.PASSWORD_LOGIN_DISABLED="operation-not-allowed",r.INVALID_IDP_RESPONSE="invalid-credential",r.INVALID_PENDING_TOKEN="invalid-credential",r.FEDERATED_USER_ID_ALREADY_LINKED="credential-already-in-use",r.MISSING_REQ_TYPE="internal-error",r.EMAIL_NOT_FOUND="user-not-found",r.RESET_PASSWORD_EXCEED_LIMIT="too-many-requests",r.EXPIRED_OOB_CODE="expired-action-code",r.INVALID_OOB_CODE="invalid-action-code",r.MISSING_OOB_CODE="internal-error",r.CREDENTIAL_TOO_OLD_LOGIN_AGAIN="requires-recent-login",r.INVALID_ID_TOKEN="invalid-user-token",r.TOKEN_EXPIRED="user-token-expired",r.USER_NOT_FOUND="user-token-expired",r.TOO_MANY_ATTEMPTS_TRY_LATER="too-many-requests",r.PASSWORD_DOES_NOT_MEET_REQUIREMENTS="password-does-not-meet-requirements",r.INVALID_CODE="invalid-verification-code",r.INVALID_SESSION_INFO="invalid-verification-id",r.INVALID_TEMPORARY_PROOF="invalid-credential",r.MISSING_SESSION_INFO="missing-verification-id",r.SESSION_EXPIRED="code-expired",r.MISSING_ANDROID_PACKAGE_NAME="missing-android-pkg-name",r.UNAUTHORIZED_DOMAIN="unauthorized-continue-uri",r.INVALID_OAUTH_CLIENT_ID="invalid-oauth-client-id",r.ADMIN_ONLY_OPERATION="admin-restricted-operation",r.INVALID_MFA_PENDING_CREDENTIAL="invalid-multi-factor-session",r.MFA_ENROLLMENT_NOT_FOUND="multi-factor-info-not-found",r.MISSING_MFA_ENROLLMENT_ID="missing-multi-factor-info",r.MISSING_MFA_PENDING_CREDENTIAL="missing-multi-factor-session",r.SECOND_FACTOR_EXISTS="second-factor-already-in-use",r.SECOND_FACTOR_LIMIT_EXCEEDED="maximum-second-factor-count-exceeded",r.BLOCKING_FUNCTION_ERROR_RESPONSE="internal-error",r.RECAPTCHA_NOT_ENABLED="recaptcha-not-enabled",r.MISSING_RECAPTCHA_TOKEN="missing-recaptcha-token",r.INVALID_RECAPTCHA_TOKEN="invalid-recaptcha-token",r.INVALID_RECAPTCHA_ACTION="invalid-recaptcha-action",r.MISSING_CLIENT_TYPE="missing-client-type",r.MISSING_RECAPTCHA_VERSION="missing-recaptcha-version",r.INVALID_RECAPTCHA_VERSION="invalid-recaptcha-version",r.INVALID_REQ_TYPE="invalid-req-type",r),F=new J(3e4,6e4);function V(e,t){return e.tenantId&&!t.tenantId?(0,o.pi)((0,o.pi)({},t),{tenantId:e.tenantId}):t}function j(e,t,n,r,i){return void 0===i&&(i={}),(0,o.mG)(this,void 0,void 0,function(){var s=this;return(0,o.Jh)(this,function(u){return[2,z(e,i,function(){return(0,o.mG)(s,void 0,void 0,function(){var i,s,u,c;return(0,o.Jh)(this,function(h){switch(h.label){case 0:return i={},s={},r&&("GET"===t?s=r:i={body:JSON.stringify(r)}),u=(0,a.xO)((0,o.pi)({key:e.config.apiKey},s)).slice(1),[4,e._getAdditionalHeaders()];case 1:return(c=h.sent())["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode),[2,M.fetch()(H(e,e.config.apiHost,n,u),(0,o.pi)({method:t,headers:c,referrerPolicy:"no-referrer"},i))]}})})})]})})}function z(e,t,n){return(0,o.mG)(this,void 0,void 0,function(){var r,i,s,u,c,h,l,d,f;return(0,o.Jh)(this,function(p){switch(p.label){case 0:e._canInitEmulator=!1,r=(0,o.pi)((0,o.pi)({},D),t),p.label=1;case 1:return p.trys.push([1,4,,5]),i=new W(e),[4,Promise.race([n(),i.promise])];case 2:return s=p.sent(),i.clearNetworkTimeout(),[4,s.json()];case 3:if("needConfirmation"in(u=p.sent()))throw K(e,"account-exists-with-different-credential",u);if(s.ok&&!("errorMessage"in u))return[2,u];if(h=(c=(s.ok?u.errorMessage:u.error.message).split(" : "))[0],l=c[1],"FEDERATED_USER_ID_ALREADY_LINKED"===h)throw K(e,"credential-already-in-use",u);if("EMAIL_EXISTS"===h)throw K(e,"email-already-in-use",u);if("USER_DISABLED"===h)throw K(e,"user-disabled",u);if(d=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),l)throw C(e,d,l);return S(e,d),[3,5];case 4:if((f=p.sent())instanceof a.ZR)throw f;return S(e,"network-request-failed",{message:String(f)}),[3,5];case 5:return[2]}})})}function x(e,t,n,r,i){return void 0===i&&(i={}),(0,o.mG)(this,void 0,void 0,function(){var s;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,j(e,t,n,r,i)];case 1:return"mfaPendingCredential"in(s=o.sent())&&S(e,"multi-factor-auth-required",{_serverResponse:s}),[2,s]}})})}function H(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?G(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var W=function(){function e(e){var t=this;this.auth=e,this.timer=null,this.promise=new Promise(function(e,n){t.timer=setTimeout(function(){return n(R(t.auth,"network-request-failed"))},F.get())})}return e.prototype.clearNetworkTimeout=function(){clearTimeout(this.timer)},e}();function K(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=R(e,t,r);return i.customData._tokenResponse=n,i}function q(e){return void 0!==e&&void 0!==e.enterprise}var B=function(){function e(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}return e.prototype.getProviderEnforcementState=function(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(var t=0,n=this.recaptchaEnforcementState;t<n.length;t++){var r=n[t];if(r.provider&&r.provider===e)return function(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}(r.enforcementState)}return null},e.prototype.isProviderEnabled=function(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)},e}();function Z(e,t){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(n){return[2,j(e,"POST","/v1/accounts:lookup",t)]})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function Y(e){return 1e3*Number(e)}function $(e){var t=e.split("."),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return P("JWT malformed, contained fewer than 3 sections"),null;try{var o=(0,a.tV)(r);if(!o)return P("Failed to decode base64 JWT payload"),null;return JSON.parse(o)}catch(e){return P("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}function Q(e){var t=$(e);return O(t,"internal-error"),O(void 0!==t.exp,"internal-error"),O(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(e,t,n){return void 0===n&&(n=!1),(0,o.mG)(this,void 0,void 0,function(){var r;return(0,o.Jh)(this,function(i){switch(i.label){case 0:if(n)return[2,t];i.label=1;case 1:return i.trys.push([1,3,,6]),[4,t];case 2:return[2,i.sent()];case 3:var o;if(!((r=i.sent())instanceof a.ZR&&((o=r.code)==="auth/".concat("user-disabled")||o==="auth/".concat("user-token-expired")))||e.auth.currentUser!==e)return[3,5];return[4,e.auth.signOut()];case 4:i.sent(),i.label=5;case 5:throw r;case 6:return[2]}})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et=function(){function e(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return e.prototype._start=function(){this.isRunning||(this.isRunning=!0,this.schedule())},e.prototype._stop=function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))},e.prototype.getInterval=function(e){if(e){var t,n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var n=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,n)},e.prototype.schedule=function(e){var t=this;if(void 0===e&&(e=!1),this.isRunning){var n=this.getInterval(e);this.timerId=setTimeout(function(){return(0,o.mG)(t,void 0,void 0,function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:return[4,this.iteration()];case 1:return e.sent(),[2]}})})},n)}},e.prototype.iteration=function(){return(0,o.mG)(this,void 0,void 0,function(){var e;return(0,o.Jh)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.user.getIdToken(!0)];case 1:return t.sent(),[3,3];case 2:return(null==(e=t.sent())?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),[2];case 3:return this.schedule(),[2]}})})},e}(),en=function(){function e(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}return e.prototype._initializeTime=function(){this.lastSignInTime=X(this.lastLoginAt),this.creationTime=X(this.createdAt)},e.prototype._copy=function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()},e.prototype.toJSON=function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(e){var t;return(0,o.mG)(this,void 0,void 0,function(){var n,r,i,s,a,u,c,h,l;return(0,o.Jh)(this,function(d){switch(d.label){case 0:return n=e.auth,[4,e.getIdToken()];case 1:return r=d.sent(),[4,ee(e,Z(n,{idToken:r}))];case 2:var f;return O(null==(i=d.sent())?void 0:i.users.length,n,"internal-error"),s=i.users[0],e._notifyReloadListener(s),a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?ei(s.providerUserInfo):[],f=e.providerData.filter(function(e){return!a.some(function(t){return t.providerId===e.providerId})}),u=(0,o.ev)((0,o.ev)([],f,!0),a,!0),c=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null==u?void 0:u.length),l=!!c&&h,Object.assign(e,{uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new en(s.createdAt,s.lastLoginAt),isAnonymous:l}),[2]}})})}function ei(e){return e.map(function(e){var t=e.providerId,n=(0,o._T)(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eo=function(){function e(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return Object.defineProperty(e.prototype,"isExpired",{get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4},enumerable:!1,configurable:!0}),e.prototype.updateFromServerResponse=function(e){O(e.idToken,"internal-error"),O(void 0!==e.idToken,"internal-error"),O(void 0!==e.refreshToken,"internal-error");var t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):Q(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)},e.prototype.updateFromIdToken=function(e){O(0!==e.length,"internal-error");var t=Q(e);this.updateTokensAndExpiration(e,null,t)},e.prototype.getToken=function(e,t){return void 0===t&&(t=!1),(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(n){switch(n.label){case 0:if(!t&&this.accessToken&&!this.isExpired)return[2,this.accessToken];if(O(this.refreshToken,e,"user-token-expired"),!this.refreshToken)return[3,2];return[4,this.refresh(e,this.refreshToken)];case 1:return n.sent(),[2,this.accessToken];case 2:return[2,null]}})})},e.prototype.clearRefreshToken=function(){this.refreshToken=null},e.prototype.refresh=function(e,t){return(0,o.mG)(this,void 0,void 0,function(){var n,r,i,s;return(0,o.Jh)(this,function(u){switch(u.label){case 0:return[4,/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t){return(0,o.mG)(this,void 0,void 0,function(){var n,r=this;return(0,o.Jh)(this,function(i){switch(i.label){case 0:return[4,z(e,{},function(){return(0,o.mG)(r,void 0,void 0,function(){var n,r,i,s,u,c;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return n=(0,a.xO)({grant_type:"refresh_token",refresh_token:t}).slice(1),i=(r=e.config).tokenApiHost,s=r.apiKey,u=H(e,i,"/v1/token","key=".concat(s)),[4,e._getAdditionalHeaders()];case 1:return(c=o.sent())["Content-Type"]="application/x-www-form-urlencoded",[2,M.fetch()(u,{method:"POST",headers:c,body:n})]}})})})];case 1:return[2,{accessToken:(n=i.sent()).access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}]}})})}(e,t)];case 1:return r=(n=u.sent()).accessToken,i=n.refreshToken,s=n.expiresIn,this.updateTokensAndExpiration(r,i,Number(s)),[2]}})})},e.prototype.updateTokensAndExpiration=function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n},e.fromJSON=function(t,n){var r=n.refreshToken,i=n.accessToken,o=n.expirationTime,s=new e;return r&&(O("string"==typeof r,"internal-error",{appName:t}),s.refreshToken=r),i&&(O("string"==typeof i,"internal-error",{appName:t}),s.accessToken=i),o&&(O("number"==typeof o,"internal-error",{appName:t}),s.expirationTime=o),s},e.prototype.toJSON=function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}},e.prototype._assign=function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime},e.prototype._clone=function(){return Object.assign(new e,this.toJSON())},e.prototype._performRefresh=function(){return L("not implemented")},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(e,t){O("string"==typeof e||void 0===e,"internal-error",{appName:t})}var ea=function(){function e(e){var t=e.uid,n=e.auth,r=e.stsTokenManager,i=(0,o._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new et(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?(0,o.ev)([],i.providerData,!0):[],this.metadata=new en(i.createdAt||void 0,i.lastLoginAt||void 0)}return e.prototype.getIdToken=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(n){switch(n.label){case 0:return[4,ee(this,this.stsTokenManager.getToken(this.auth,e))];case 1:if(O(t=n.sent(),this.auth,"internal-error"),!(this.accessToken!==t))return[3,3];return this.accessToken=t,[4,this.auth._persistUserIfCurrent(this)];case 2:n.sent(),this.auth._notifyListenersIfCurrent(this),n.label=3;case 3:return[2,t]}})})},e.prototype.getIdTokenResult=function(e){return function(e,t){return void 0===t&&(t=!1),(0,o.mG)(this,void 0,void 0,function(){var n,r,i,s,u;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,(n=(0,a.m9)(e)).getIdToken(t)];case 1:return O((i=$(r=o.sent()))&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error"),u=null==(s="object"==typeof i.firebase?i.firebase:void 0)?void 0:s.sign_in_provider,[2,{claims:i,token:r,authTime:X(Y(i.auth_time)),issuedAtTime:X(Y(i.iat)),expirationTime:X(Y(i.exp)),signInProvider:u||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}]}})})}(this,e)},e.prototype.reload=function(){return function(e){return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(n){switch(n.label){case 0:return[4,er(t=(0,a.m9)(e))];case 1:return n.sent(),[4,t.auth._persistUserIfCurrent(t)];case 2:return n.sent(),t.auth._notifyListenersIfCurrent(t),[2]}})})}(this)},e.prototype._assign=function(e){this!==e&&(O(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(function(e){return(0,o.pi)({},e)}),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))},e.prototype._clone=function(t){var n=new e((0,o.pi)((0,o.pi)({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n},e.prototype._onReload=function(e){O(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)},e.prototype._notifyReloadListener=function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e},e.prototype._startProactiveRefresh=function(){this.proactiveRefresh._start()},e.prototype._stopProactiveRefresh=function(){this.proactiveRefresh._stop()},e.prototype._updateTokensIfNecessary=function(e,t){return void 0===t&&(t=!1),(0,o.mG)(this,void 0,void 0,function(){var n;return(0,o.Jh)(this,function(r){switch(r.label){case 0:if(n=!1,e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),!t)return[3,2];return[4,er(this)];case 1:r.sent(),r.label=2;case 2:return[4,this.auth._persistUserIfCurrent(this)];case 3:return r.sent(),n&&this.auth._notifyListenersIfCurrent(this),[2]}})})},e.prototype.delete=function(){return(0,o.mG)(this,void 0,void 0,function(){var e;return(0,o.Jh)(this,function(t){switch(t.label){case 0:if((0,s.rh)(this.auth.app))return[2,Promise.reject(N(this.auth))];return[4,this.getIdToken()];case 1:return e=t.sent(),[4,ee(this,/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(n){return[2,j(e,"POST","/v1/accounts:delete",t)]})})}(this.auth,{idToken:e}))];case 2:return t.sent(),this.stsTokenManager.clearRefreshToken(),[2,this.auth.signOut()]}})})},e.prototype.toJSON=function(){return(0,o.pi)((0,o.pi)({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(function(e){return(0,o.pi)({},e)}),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})},Object.defineProperty(e.prototype,"refreshToken",{get:function(){return this.stsTokenManager.refreshToken||""},enumerable:!1,configurable:!0}),e._fromJSON=function(t,n){var r,i,s,a,u,c,h,l,d=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,p=null!==(s=n.phoneNumber)&&void 0!==s?s:void 0,v=null!==(a=n.photoURL)&&void 0!==a?a:void 0,m=null!==(u=n.tenantId)&&void 0!==u?u:void 0,g=null!==(c=n._redirectEventId)&&void 0!==c?c:void 0,y=null!==(h=n.createdAt)&&void 0!==h?h:void 0,_=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,I=n.uid,T=n.emailVerified,b=n.isAnonymous,k=n.providerData,w=n.stsTokenManager;O(I&&w,t,"internal-error");var E=eo.fromJSON(this.name,w);O("string"==typeof I,t,"internal-error"),es(d,t.name),es(f,t.name),O("boolean"==typeof T,t,"internal-error"),O("boolean"==typeof b,t,"internal-error"),es(p,t.name),es(v,t.name),es(m,t.name),es(g,t.name),es(y,t.name),es(_,t.name);var P=new e({uid:I,auth:t,email:f,emailVerified:T,displayName:d,isAnonymous:b,photoURL:v,phoneNumber:p,tenantId:m,stsTokenManager:E,createdAt:y,lastLoginAt:_});return k&&Array.isArray(k)&&(P.providerData=k.map(function(e){return(0,o.pi)({},e)})),g&&(P._redirectEventId=g),P},e._fromIdTokenResponse=function(t,n,r){return void 0===r&&(r=!1),(0,o.mG)(this,void 0,void 0,function(){var i,s;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return(i=new eo).updateFromServerResponse(n),[4,er(s=new e({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r}))];case 1:return o.sent(),[2,s]}})})},e._fromGetAccountInfoResponse=function(t,n,r){return(0,o.mG)(this,void 0,void 0,function(){var i,s,a,u,c;return(0,o.Jh)(this,function(o){return O(void 0!==(i=n.users[0]).localId,"internal-error"),s=void 0!==i.providerUserInfo?ei(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(null==s?void 0:s.length),(u=new eo).updateFromIdToken(r),Object.assign(c=new e({uid:i.localId,auth:t,stsTokenManager:u,isAnonymous:a}),{uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new en(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(null==s?void 0:s.length)}),[2,c]})})},e}(),eu=new Map;function ec(e){t="Expected a class definition",e instanceof Function||L(t);var t,n,r=eu.get(e);return r?(n="Instance stored in cache mismatched with class",r instanceof e||L(n)):(r=new e,eu.set(e,r)),r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eh=function(){function e(){this.type="NONE",this.storage={}}return e.prototype._isAvailable=function(){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(e){return[2,!0]})})},e.prototype._set=function(e,t){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(n){return this.storage[e]=t,[2]})})},e.prototype._get=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(n){return[2,void 0===(t=this.storage[e])?null:t]})})},e.prototype._remove=function(e){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(t){return delete this.storage[e],[2]})})},e.prototype._addListener=function(e,t){},e.prototype._removeListener=function(e,t){},e.type="NONE",e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(e,t,n){return"".concat("firebase",":").concat(e,":").concat(t,":").concat(n)}var ed=function(){function e(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;var r=this.auth,i=r.config,o=r.name;this.fullUserKey=el(this.userKey,i.apiKey,o),this.fullPersistenceKey=el("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return e.prototype.setCurrentUser=function(e){return this.persistence._set(this.fullUserKey,e.toJSON())},e.prototype.getCurrentUser=function(){return(0,o.mG)(this,void 0,void 0,function(){var e;return(0,o.Jh)(this,function(t){switch(t.label){case 0:return[4,this.persistence._get(this.fullUserKey)];case 1:return[2,(e=t.sent())?ea._fromJSON(this.auth,e):null]}})})},e.prototype.removeCurrentUser=function(){return this.persistence._remove(this.fullUserKey)},e.prototype.savePersistenceForRedirect=function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)},e.prototype.setPersistence=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(n){switch(n.label){case 0:if(this.persistence===e)return[2];return[4,this.getCurrentUser()];case 1:return t=n.sent(),[4,this.removeCurrentUser()];case 2:if(n.sent(),this.persistence=e,t)return[2,this.setCurrentUser(t)];return[2]}})})},e.prototype.delete=function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)},e.create=function(t,n,r){return void 0===r&&(r="authUser"),(0,o.mG)(this,void 0,void 0,function(){var i,s,a,u,c,h,l,d,f,p,v=this;return(0,o.Jh)(this,function(m){switch(m.label){case 0:if(!n.length)return[2,new e(ec(eh),t,r)];return[4,Promise.all(n.map(function(e){return(0,o.mG)(v,void 0,void 0,function(){return(0,o.Jh)(this,function(t){switch(t.label){case 0:return[4,e._isAvailable()];case 1:if(t.sent())return[2,e];return[2,void 0]}})})}))];case 1:s=(i=m.sent().filter(function(e){return e}))[0]||ec(eh),a=el(r,t.config.apiKey,t.name),u=null,c=0,h=n,m.label=2;case 2:if(!(c<h.length))return[3,7];l=h[c],m.label=3;case 3:return m.trys.push([3,5,,6]),[4,l._get(a)];case 4:if(d=m.sent())return f=ea._fromJSON(t,d),l!==s&&(u=f),s=l,[3,7];return[3,6];case 5:return m.sent(),[3,6];case 6:return c++,[3,2];case 7:if(p=i.filter(function(e){return e._shouldAllowMigration}),!s._shouldAllowMigration||!p.length)return[2,new e(s,t,r)];if(s=p[0],!u)return[3,9];return[4,s._set(a,u.toJSON())];case 8:m.sent(),m.label=9;case 9:return[4,Promise.all(n.map(function(e){return(0,o.mG)(v,void 0,void 0,function(){return(0,o.Jh)(this,function(t){switch(t.label){case 0:if(!(e!==s))return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e._remove(a)];case 2:case 3:return t.sent(),[3,4];case 4:return[2]}})})}))];case 10:return m.sent(),[2,new e(s,t,r)]}})})},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(e){var t,n,r=e.toLowerCase();if(r.includes("opera/")||r.includes("opr/")||r.includes("opios/"))return"Opera";if(ev(r))return"IEMobile";if(r.includes("msie")||r.includes("trident/"))return"IE";if(r.includes("edge/"))return"Edge";if(void 0===(t=r)&&(t=(0,a.z$)()),/firefox\//i.test(t))return"Firefox";if(r.includes("silk/"))return"Silk";if(eg(r))return"Blackberry";if(ey(r))return"Webos";if(ep(r))return"Safari";if((r.includes("chrome/")||(void 0===(n=r)&&(n=(0,a.z$)()),/crios\//i.test(n)))&&!r.includes("edge/"))return"Chrome";if(em(r))return"Android";var i=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return(null==i?void 0:i.length)===2?i[1]:"Other"}function ep(e){void 0===e&&(e=(0,a.z$)());var t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ev(e){return void 0===e&&(e=(0,a.z$)()),/iemobile/i.test(e)}function em(e){return void 0===e&&(e=(0,a.z$)()),/android/i.test(e)}function eg(e){return void 0===e&&(e=(0,a.z$)()),/blackberry/i.test(e)}function ey(e){return void 0===e&&(e=(0,a.z$)()),/webos/i.test(e)}function e_(e){return void 0===e&&(e=(0,a.z$)()),/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(e,t){switch(void 0===t&&(t=[]),e){case"Browser":n=ef((0,a.z$)());break;case"Worker":n="".concat(ef((0,a.z$)()),"-").concat(e);break;default:n=e}var n,r=t.length?t.join(","):"FirebaseCore-web";return"".concat(n,"/").concat("JsCore","/").concat(s.Jn,"/").concat(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eT=function(){function e(e){this.auth=e,this.queue=[]}return e.prototype.pushCallback=function(e,t){var n=this,r=function(t){return new Promise(function(n,r){try{var i=e(t);n(i)}catch(e){r(e)}})};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}},e.prototype.runMiddleware=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t,n,r,i,s,a,u,c;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(this.auth.currentUser===e)return[2];t=[],o.label=1;case 1:o.trys.push([1,6,,7]),n=0,r=this.queue,o.label=2;case 2:if(!(n<r.length))return[3,5];return[4,(i=r[n])(e)];case 3:o.sent(),i.onAbort&&t.push(i.onAbort),o.label=4;case 4:return n++,[3,2];case 5:return[3,7];case 6:for(s=o.sent(),t.reverse(),a=0,u=t;a<u.length;a++){c=u[a];try{c()}catch(e){}}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==s?void 0:s.message});case 7:return[2]}})})},e}(),eb=function(){function e(e){var t,n,r,i,o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}return e.prototype.validatePassword=function(e){var t,n,r,i,o,s,a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(o=a.containsNumericCharacter)||void 0===o||o),a.isValid&&(a.isValid=null===(s=a.containsNonAlphanumericCharacter)||void 0===s||s),a},e.prototype.validatePasswordLengthOptions=function(e,t){var n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)},e.prototype.validatePasswordCharacterOptions=function(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(var n,r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))},e.prototype.updatePasswordCharacterOptionsStatuses=function(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))},e}(),ek=function(){function e(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eE(this),this.idTokenSubscription=new eE(this),this.beforeStateQueue=new eT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=w,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}return e.prototype._initializeWithPersistence=function(e,t){var n=this;return t&&(this._popupRedirectResolver=ec(t)),this._initializationPromise=this.queue(function(){return(0,o.mG)(n,void 0,void 0,function(){var n,r,i;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(this._deleted)return[2];return n=this,[4,ed.create(this,e)];case 1:if(n.persistenceManager=o.sent(),this._deleted)return[2];if(!(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively))return[3,5];o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this._popupRedirectResolver._initialize(this)];case 3:case 4:return o.sent(),[3,5];case 5:return[4,this.initializeCurrentUser(t)];case 6:if(o.sent(),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted)return[2];return this._isInitialized=!0,[2]}})})}),this._initializationPromise},e.prototype._onStorageEvent=function(){return(0,o.mG)(this,void 0,void 0,function(){var e;return(0,o.Jh)(this,function(t){switch(t.label){case 0:if(this._deleted)return[2];return[4,this.assertedPersistence.getCurrentUser()];case 1:if(e=t.sent(),!this.currentUser&&!e)return[2];if(!(this.currentUser&&e&&this.currentUser.uid===e.uid))return[3,3];return this._currentUser._assign(e),[4,this.currentUser.getIdToken()];case 2:case 4:return t.sent(),[2];case 3:return[4,this._updateCurrentUser(e,!0)]}})})},e.prototype.initializeCurrentUserFromIdToken=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t,n;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,4,,6]),[4,Z(this,{idToken:e})];case 1:return t=r.sent(),[4,ea._fromGetAccountInfoResponse(this,t,e)];case 2:return n=r.sent(),[4,this.directlySetCurrentUser(n)];case 3:case 5:return r.sent(),[3,6];case 4:return console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r.sent()),[4,this.directlySetCurrentUser(null)];case 6:return[2]}})})},e.prototype.initializeCurrentUser=function(e){var t;return(0,o.mG)(this,void 0,void 0,function(){var n,r,i,a,u,c,h,l,d=this;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if((0,s.rh)(this.app)){if(n=this.app.settings.authIdToken)return[2,new Promise(function(e){setTimeout(function(){return d.initializeCurrentUserFromIdToken(n).then(e,e)})})];return[2,this.directlySetCurrentUser(null)]}return[4,this.assertedPersistence.getCurrentUser()];case 1:if(i=r=o.sent(),a=!1,!(e&&this.config.authDomain))return[3,4];return[4,this.getOrInitRedirectPersistenceManager()];case 2:return o.sent(),u=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,c=null==i?void 0:i._redirectEventId,[4,this.tryRedirectSignIn(e)];case 3:h=o.sent(),(!u||u===c)&&(null==h?void 0:h.user)&&(i=h.user,a=!0),o.label=4;case 4:if(!i)return[2,this.directlySetCurrentUser(null)];if(i._redirectEventId)return[3,9];if(!a)return[3,8];o.label=5;case 5:return o.trys.push([5,7,,8]),[4,this.beforeStateQueue.runMiddleware(i)];case 6:return o.sent(),[3,8];case 7:return l=o.sent(),i=r,this._popupRedirectResolver._overrideRedirectResult(this,function(){return Promise.reject(l)}),[3,8];case 8:if(i)return[2,this.reloadAndSetCurrentUserOrClear(i)];return[2,this.directlySetCurrentUser(null)];case 9:return O(this._popupRedirectResolver,this,"argument-error"),[4,this.getOrInitRedirectPersistenceManager()];case 10:if(o.sent(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId)return[2,this.directlySetCurrentUser(i)];return[2,this.reloadAndSetCurrentUserOrClear(i)]}})})},e.prototype.tryRedirectSignIn=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(n){switch(n.label){case 0:t=null,n.label=1;case 1:return n.trys.push([1,3,,5]),[4,this._popupRedirectResolver._completeRedirectFn(this,e,!0)];case 2:return t=n.sent(),[3,5];case 3:return n.sent(),[4,this._setRedirectUser(null)];case 4:return n.sent(),[3,5];case 5:return[2,t]}})})},e.prototype.reloadAndSetCurrentUserOrClear=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,er(e)];case 1:return n.sent(),[3,3];case 2:if((null==(t=n.sent())?void 0:t.code)!=="auth/".concat("network-request-failed"))return[2,this.directlySetCurrentUser(null)];return[3,3];case 3:return[2,this.directlySetCurrentUser(e)]}})})},e.prototype.useDeviceLanguage=function(){this.languageCode=function(){if("undefined"==typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()},e.prototype._delete=function(){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(e){return this._deleted=!0,[2]})})},e.prototype.updateCurrentUser=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(n){return(0,s.rh)(this.app)?[2,Promise.reject(N(this))]:((t=e?(0,a.m9)(e):null)&&O(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),[2,this._updateCurrentUser(t&&t._clone(this))])})})},e.prototype._updateCurrentUser=function(e,t){return void 0===t&&(t=!1),(0,o.mG)(this,void 0,void 0,function(){var n=this;return(0,o.Jh)(this,function(r){switch(r.label){case 0:if(this._deleted)return[2];if(e&&O(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t)return[3,2];return[4,this.beforeStateQueue.runMiddleware(e)];case 1:r.sent(),r.label=2;case 2:return[2,this.queue(function(){return(0,o.mG)(n,void 0,void 0,function(){return(0,o.Jh)(this,function(t){switch(t.label){case 0:return[4,this.directlySetCurrentUser(e)];case 1:return t.sent(),this.notifyAuthListeners(),[2]}})})})]}})})},e.prototype.signOut=function(){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:if((0,s.rh)(this.app))return[2,Promise.reject(N(this))];return[4,this.beforeStateQueue.runMiddleware(null)];case 1:if(e.sent(),!(this.redirectPersistenceManager||this._popupRedirectResolver))return[3,3];return[4,this._setRedirectUser(null)];case 2:e.sent(),e.label=3;case 3:return[2,this._updateCurrentUser(null,!0)]}})})},e.prototype.setPersistence=function(e){var t=this;return(0,s.rh)(this.app)?Promise.reject(N(this)):this.queue(function(){return(0,o.mG)(t,void 0,void 0,function(){return(0,o.Jh)(this,function(t){switch(t.label){case 0:return[4,this.assertedPersistence.setPersistence(ec(e))];case 1:return t.sent(),[2]}})})})},e.prototype._getRecaptchaConfig=function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]},e.prototype.validatePassword=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(n){switch(n.label){case 0:if(this._getPasswordPolicyInternal())return[3,2];return[4,this._updatePasswordPolicy()];case 1:n.sent(),n.label=2;case 2:if((t=this._getPasswordPolicyInternal()).schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION)return[2,Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{}))];return[2,t.validatePassword(e)]}})})},e.prototype._getPasswordPolicyInternal=function(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]},e.prototype._updatePasswordPolicy=function(){return(0,o.mG)(this,void 0,void 0,function(){var e;return(0,o.Jh)(this,function(t){switch(t.label){case 0:return[4,/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t){return void 0===t&&(t={}),(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(n){return[2,j(e,"GET","/v2/passwordPolicy",V(e,t))]})})}(this)];case 1:return e=new eb(t.sent()),null===this.tenantId?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e,[2]}})})},e.prototype._getPersistence=function(){return this.assertedPersistence.persistence.type},e.prototype._updateErrorMap=function(e){this._errorFactory=new a.LL("auth","Firebase",e())},e.prototype.onAuthStateChanged=function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)},e.prototype.beforeAuthStateChanged=function(e,t){return this.beforeStateQueue.pushCallback(e,t)},e.prototype.onIdTokenChanged=function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)},e.prototype.authStateReady=function(){var e=this;return new Promise(function(t,n){if(e.currentUser)t();else var r=e.onAuthStateChanged(function(){r(),t()},n)})},e.prototype.revokeAccessToken=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(n){switch(n.label){case 0:if(!this.currentUser)return[3,3];return[4,this.currentUser.getIdToken()];case 1:return t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n.sent()},null!=this.tenantId&&(t.tenantId=this.tenantId),[4,function(e,t){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(n){return[2,j(e,"POST","/v2/accounts:revokeToken",V(e,t))]})})}(this,t)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.toJSON=function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}},e.prototype._setRedirectUser=function(e,t){return(0,o.mG)(this,void 0,void 0,function(){var n;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,this.getOrInitRedirectPersistenceManager(t)];case 1:return n=r.sent(),[2,null===e?n.removeCurrentUser():n.setCurrentUser(e)]}})})},e.prototype.getOrInitRedirectPersistenceManager=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t,n,r;return(0,o.Jh)(this,function(i){switch(i.label){case 0:if(this.redirectPersistenceManager)return[3,3];return O(t=e&&ec(e)||this._popupRedirectResolver,this,"argument-error"),n=this,[4,ed.create(this,[ec(t._redirectPersistence)],"redirectUser")];case 1:return n.redirectPersistenceManager=i.sent(),r=this,[4,this.redirectPersistenceManager.getCurrentUser()];case 2:r.redirectUser=i.sent(),i.label=3;case 3:return[2,this.redirectPersistenceManager]}})})},e.prototype._redirectUserForId=function(e){var t,n;return(0,o.mG)(this,void 0,void 0,function(){var r=this;return(0,o.Jh)(this,function(i){switch(i.label){case 0:if(!this._isInitialized)return[3,2];return[4,this.queue(function(){return(0,o.mG)(r,void 0,void 0,function(){return(0,o.Jh)(this,function(e){return[2]})})})];case 1:i.sent(),i.label=2;case 2:if((null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e)return[2,this._currentUser];if((null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e)return[2,this.redirectUser];return[2,null]}})})},e.prototype._persistUserIfCurrent=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t=this;return(0,o.Jh)(this,function(n){return e===this.currentUser?[2,this.queue(function(){return(0,o.mG)(t,void 0,void 0,function(){return(0,o.Jh)(this,function(t){return[2,this.directlySetCurrentUser(e)]})})})]:[2]})})},e.prototype._notifyListenersIfCurrent=function(e){e===this.currentUser&&this.notifyAuthListeners()},e.prototype._key=function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)},e.prototype._startProactiveRefresh=function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()},e.prototype._stopProactiveRefresh=function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()},Object.defineProperty(e.prototype,"_currentUser",{get:function(){return this.currentUser},enumerable:!1,configurable:!0}),e.prototype.notifyAuthListeners=function(){if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var e,t,n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}},e.prototype.registerStateListener=function(e,t,n,r){var i=this;if(this._deleted)return function(){};var o="function"==typeof t?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(O(a,this,"internal-error"),a.then(function(){s||o(i.currentUser)}),"function"==typeof t){var u=e.addObserver(t,n,r);return function(){s=!0,u()}}var c=e.addObserver(t);return function(){s=!0,c()}},e.prototype.directlySetCurrentUser=function(e){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(t){switch(t.label){case 0:if(this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,!e)return[3,2];return[4,this.assertedPersistence.setCurrentUser(e)];case 1:return t.sent(),[3,4];case 2:return[4,this.assertedPersistence.removeCurrentUser()];case 3:t.sent(),t.label=4;case 4:return[2]}})})},e.prototype.queue=function(e){return this.operations=this.operations.then(e,e),this.operations},Object.defineProperty(e.prototype,"assertedPersistence",{get:function(){return O(this.persistenceManager,this,"internal-error"),this.persistenceManager},enumerable:!1,configurable:!0}),e.prototype._logFramework=function(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eI(this.config.clientPlatform,this._getFrameworks()))},e.prototype._getFrameworks=function(){return this.frameworks},e.prototype._getAdditionalHeaders=function(){var e;return(0,o.mG)(this,void 0,void 0,function(){var t,n,r,i;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return(i={})["X-Client-Version"]=this.clientVersion,t=i,this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId),[4,null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader()];case 1:return(n=o.sent())&&(t["X-Firebase-Client"]=n),[4,this._getAppCheckToken()];case 2:return(r=o.sent())&&(t["X-Firebase-AppCheck"]=r),[2,t]}})})},e.prototype._getAppCheckToken=function(){var e;return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(n){switch(n.label){case 0:return[4,null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken()];case 1:return(null==(t=n.sent())?void 0:t.error)&&function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];E.logLevel<=c.in.WARN&&E.warn.apply(E,(0,o.ev)(["Auth (".concat(s.Jn,"): ").concat(e)],t,!1))}("Error while retrieving App Check token: ".concat(t.error)),[2,null==t?void 0:t.token]}})})},e}();function ew(e){return(0,a.m9)(e)}var eE=function(){function e(e){var t=this;this.auth=e,this.observer=null,this.addObserver=(0,a.ne)(function(e){return t.observer=e})}return Object.defineProperty(e.prototype,"next",{get:function(){return O(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)},enumerable:!1,configurable:!0}),e}(),eP={loadJS:function(){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(e){throw Error("Unable to load external scripts")})})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""},eS=function(){function e(e){this.type="recaptcha-enterprise",this.auth=ew(e)}return e.prototype.verify=function(e,t){return void 0===e&&(e="verify"),void 0===t&&(t=!1),(0,o.mG)(this,void 0,void 0,function(){function n(t,n,r){var i=window.grecaptcha;q(i)?i.enterprise.ready(function(){i.enterprise.execute(t,{action:e}).then(function(e){n(e)}).catch(function(){n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}var r=this;return(0,o.Jh)(this,function(e){return[2,new Promise(function(e,i){(function(e){return(0,o.mG)(this,void 0,void 0,function(){var n=this;return(0,o.Jh)(this,function(r){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return[2,e._agentRecaptchaConfig.siteKey];if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return[2,e._tenantRecaptchaConfigs[e.tenantId].siteKey]}return[2,new Promise(function(t,r){return(0,o.mG)(n,void 0,void 0,function(){return(0,o.Jh)(this,function(n){return(function(e,t){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(n){return[2,j(e,"GET","/v2/recaptchaConfig",V(e,t))]})})})(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(function(n){if(void 0===n.recaptchaKey)r(Error("recaptcha Enterprise site key undefined"));else{var i=new B(n);return null==e.tenantId?e._agentRecaptchaConfig=i:e._tenantRecaptchaConfigs[e.tenantId]=i,t(i.siteKey)}}).catch(function(e){r(e)}),[2]})})})]})})})(r.auth).then(function(r){if(!t&&q(window.grecaptcha))n(r,e,i);else{if("undefined"==typeof window){i(Error("RecaptchaVerifier is only supported in browser"));return}var o,s=eP.recaptchaEnterpriseScript;0!==s.length&&(s+=r),(o=s,eP.loadJS(o)).then(function(){n(r,e,i)}).catch(function(e){i(e)})}}).catch(function(e){i(e)})})]})})},e}();function eR(e,t,n,r){return void 0===r&&(r=!1),(0,o.mG)(this,void 0,void 0,function(){var i,s,a;return(0,o.Jh)(this,function(u){switch(u.label){case 0:i=new eS(e),u.label=1;case 1:return u.trys.push([1,3,,5]),[4,i.verify(n)];case 2:case 4:return s=u.sent(),[3,5];case 3:return u.sent(),[4,i.verify(n,!0)];case 5:return a=(0,o.pi)({},t),r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),[2,a]}})})}function eC(e,t,n,r){var i;return(0,o.mG)(this,void 0,void 0,function(){var s=this;return(0,o.Jh)(this,function(a){switch(a.label){case 0:if(!(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")))return[3,2];return[4,eR(e,t,n,"getOobCode"===n)];case 1:return[2,r(e,a.sent())];case 2:return[2,r(e,t).catch(function(i){return(0,o.mG)(s,void 0,void 0,function(){return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(i.code!=="auth/".concat("missing-recaptcha-token"))return[3,2];return console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.")),[4,eR(e,t,n,"getOobCode"===n)];case 1:return[2,r(e,o.sent())];case 2:return[2,Promise.reject(i)]}})})})]}})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(e,t){var n=(0,s.qX)(e,"auth");if(n.isInitialized()){var r=n.getImmediate(),i=n.getOptions();if((0,a.vZ)(i,null!=t?t:{}))return r;S(r,"already-initialized")}return n.initialize({options:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eA=function(){function e(e,t){this.providerId=e,this.signInMethod=t}return e.prototype.toJSON=function(){return L("not implemented")},e.prototype._getIdTokenResponse=function(e){return L("not implemented")},e.prototype._linkToIdToken=function(e,t){return L("not implemented")},e.prototype._getReauthenticationResolver=function(e){return L("not implemented")},e}();function eO(e,t){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(n){return[2,j(e,"POST","/v1/accounts:signUp",t)]})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eL(e,t){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(n){return[2,x(e,"POST","/v1/accounts:signInWithPassword",V(e,t))]})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eU=function(e){function t(t,n,r,i){void 0===i&&(i=null);var o=e.call(this,"password",r)||this;return o._email=t,o._password=n,o._tenantId=i,o}return(0,o.ZT)(t,e),t._fromEmailAndPassword=function(e,n){return new t(e,n,"password")},t._fromEmailAndCode=function(e,n,r){return void 0===r&&(r=null),new t(e,n,"emailLink",r)},t.prototype.toJSON=function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}},t.fromJSON=function(e){var t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null},t.prototype._getIdTokenResponse=function(e){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(t){switch(this.signInMethod){case"password":return[2,eC(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",eL)];case"emailLink":return[2,/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(n){return[2,x(e,"POST","/v1/accounts:signInWithEmailLink",V(e,t))]})})}(e,{email:this._email,oobCode:this._password})];default:S(e,"internal-error")}return[2]})})},t.prototype._linkToIdToken=function(e,t){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(n){switch(this.signInMethod){case"password":return[2,eC(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",eO)];case"emailLink":return[2,function(e,t){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(n){return[2,x(e,"POST","/v1/accounts:signInWithEmailLink",V(e,t))]})})}(e,{idToken:t,email:this._email,oobCode:this._password})];default:S(e,"internal-error")}return[2]})})},t.prototype._getReauthenticationResolver=function(e){return this._getIdTokenResponse(e)},t}(eA);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eJ(e,t){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(n){return[2,x(e,"POST","/v1/accounts:signInWithIdp",V(e,t))]})})}var eG=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pendingToken=null,t}return(0,o.ZT)(t,e),t._fromParams=function(e){var n=new t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):S("argument-error"),n},t.prototype.toJSON=function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}},t.fromJSON=function(e){var n="string"==typeof e?JSON.parse(e):e,r=n.providerId,i=n.signInMethod,s=(0,o._T)(n,["providerId","signInMethod"]);if(!r||!i)return null;var a=new t(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a},t.prototype._getIdTokenResponse=function(e){return eJ(e,this.buildRequest())},t.prototype._linkToIdToken=function(e,t){var n=this.buildRequest();return n.idToken=t,eJ(e,n)},t.prototype._getReauthenticationResolver=function(e){var t=this.buildRequest();return t.autoCreate=!1,eJ(e,t)},t.prototype.buildRequest=function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,a.xO)(t)}return e},t}(eA),eM=((i={}).USER_NOT_FOUND="user-not-found",i);!function(e){function t(t){var n=e.call(this,"phone","phone")||this;return n.params=t,n}(0,o.ZT)(t,e),t._fromVerification=function(e,n){return new t({verificationId:e,verificationCode:n})},t._fromTokenResponse=function(e,n){return new t({phoneNumber:e,temporaryProof:n})},t.prototype._getIdTokenResponse=function(e){return function(e,t){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(n){return[2,x(e,"POST","/v1/accounts:signInWithPhoneNumber",V(e,t))]})})}(e,this._makeVerificationRequest())},t.prototype._linkToIdToken=function(e,t){return function(e,t){return(0,o.mG)(this,void 0,void 0,function(){var n;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,x(e,"POST","/v1/accounts:signInWithPhoneNumber",V(e,t))];case 1:if((n=r.sent()).temporaryProof)throw K(e,"account-exists-with-different-credential",n);return[2,n]}})})}(e,(0,o.pi)({idToken:t},this._makeVerificationRequest()))},t.prototype._getReauthenticationResolver=function(e){return function(e,t){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(n){return[2,x(e,"POST","/v1/accounts:signInWithPhoneNumber",V(e,(0,o.pi)((0,o.pi)({},t),{operation:"REAUTH"})),eM)]})})}(e,this._makeVerificationRequest())},t.prototype._makeVerificationRequest=function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}},t.prototype.toJSON=function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e},t.fromJSON=function(e){"string"==typeof e&&(e=JSON.parse(e));var n=e,r=n.verificationId,i=n.verificationCode,o=n.phoneNumber,s=n.temporaryProof;return i||r||o||s?new t({verificationId:r,verificationCode:i,phoneNumber:o,temporaryProof:s}):null}}(eA);var eD=function(){function e(e){var t,n,r,i,o,s,u=(0,a.zd)((0,a.pd)(e)),c=null!==(t=u.apiKey)&&void 0!==t?t:null,h=null!==(n=u.oobCode)&&void 0!==n?n:null,l=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=u.mode)&&void 0!==r?r:null);O(c&&h&&l,"argument-error"),this.apiKey=c,this.operation=l,this.code=h,this.continueUrl=null!==(i=u.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return e.parseLink=function(t){var n,r,i,o=(r=(n=(0,a.zd)((0,a.pd)(t)).link)?(0,a.zd)((0,a.pd)(n)).deep_link_id:null,((i=(0,a.zd)((0,a.pd)(t)).deep_link_id)?(0,a.zd)((0,a.pd)(i)).link:null)||i||r||n||t);try{return new e(o)}catch(e){return null}},e}(),eF=function(){function e(){this.providerId=e.PROVIDER_ID}return e.credential=function(e,t){return eU._fromEmailAndPassword(e,t)},e.credentialWithLink=function(e,t){var n=eD.parseLink(t);return O(n,"argument-error"),eU._fromEmailAndCode(e,n.code,n.tenantId)},e.PROVIDER_ID="password",e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e.EMAIL_LINK_SIGN_IN_METHOD="emailLink",e}(),eV=function(){function e(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}return e.prototype.setDefaultLanguage=function(e){this.defaultLanguageCode=e},e.prototype.setCustomParameters=function(e){return this.customParameters=e,this},e.prototype.getCustomParameters=function(){return this.customParameters},e}(),ej=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scopes=[],t}return(0,o.ZT)(t,e),t.prototype.addScope=function(e){return this.scopes.includes(e)||this.scopes.push(e),this},t.prototype.getScopes=function(){return(0,o.ev)([],this.scopes,!0)},t}(eV);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}(0,o.ZT)(t,e),t.credentialFromJSON=function(e){var t="string"==typeof e?JSON.parse(e):e;return O("providerId"in t&&"signInMethod"in t,"argument-error"),eG._fromParams(t)},t.prototype.credential=function(e){return this._credential((0,o.pi)((0,o.pi)({},e),{nonce:e.rawNonce}))},t.prototype._credential=function(e){return O(e.idToken||e.accessToken,"argument-error"),eG._fromParams((0,o.pi)((0,o.pi)({},e),{providerId:this.providerId,signInMethod:this.providerId}))},t.credentialFromResult=function(e){return t.oauthCredentialFromTaggedObject(e)},t.credentialFromError=function(e){return t.oauthCredentialFromTaggedObject(e.customData||{})},t.oauthCredentialFromTaggedObject=function(e){var n=e._tokenResponse;if(!n)return null;var r=n.oauthIdToken,i=n.oauthAccessToken,o=n.oauthTokenSecret,s=n.pendingToken,a=n.nonce,u=n.providerId;if(!i&&!o&&!r&&!s||!u)return null;try{return new t(u)._credential({idToken:r,accessToken:i,nonce:a,pendingToken:s})}catch(e){return null}}}(ej),function(e){function t(){return e.call(this,"facebook.com")||this}(0,o.ZT)(t,e),t.credential=function(e){return eG._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.FACEBOOK_SIGN_IN_METHOD,accessToken:e})},t.credentialFromResult=function(e){return t.credentialFromTaggedObject(e)},t.credentialFromError=function(e){return t.credentialFromTaggedObject(e.customData||{})},t.credentialFromTaggedObject=function(e){var n=e._tokenResponse;if(!n||!("oauthAccessToken"in n)||!n.oauthAccessToken)return null;try{return t.credential(n.oauthAccessToken)}catch(e){return null}},t.FACEBOOK_SIGN_IN_METHOD="facebook.com",t.PROVIDER_ID="facebook.com"}(ej),function(e){function t(){var t=e.call(this,"google.com")||this;return t.addScope("profile"),t}(0,o.ZT)(t,e),t.credential=function(e,n){return eG._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})},t.credentialFromResult=function(e){return t.credentialFromTaggedObject(e)},t.credentialFromError=function(e){return t.credentialFromTaggedObject(e.customData||{})},t.credentialFromTaggedObject=function(e){var n=e._tokenResponse;if(!n)return null;var r=n.oauthIdToken,i=n.oauthAccessToken;if(!r&&!i)return null;try{return t.credential(r,i)}catch(e){return null}},t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com"}(ej),function(e){function t(){return e.call(this,"github.com")||this}(0,o.ZT)(t,e),t.credential=function(e){return eG._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GITHUB_SIGN_IN_METHOD,accessToken:e})},t.credentialFromResult=function(e){return t.credentialFromTaggedObject(e)},t.credentialFromError=function(e){return t.credentialFromTaggedObject(e.customData||{})},t.credentialFromTaggedObject=function(e){var n=e._tokenResponse;if(!n||!("oauthAccessToken"in n)||!n.oauthAccessToken)return null;try{return t.credential(n.oauthAccessToken)}catch(e){return null}},t.GITHUB_SIGN_IN_METHOD="github.com",t.PROVIDER_ID="github.com"}(ej);var ez=function(e){function t(t,n){var r=e.call(this,t,t)||this;return r.pendingToken=n,r}return(0,o.ZT)(t,e),t.prototype._getIdTokenResponse=function(e){return eJ(e,this.buildRequest())},t.prototype._linkToIdToken=function(e,t){var n=this.buildRequest();return n.idToken=t,eJ(e,n)},t.prototype._getReauthenticationResolver=function(e){var t=this.buildRequest();return t.autoCreate=!1,eJ(e,t)},t.prototype.toJSON=function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}},t.fromJSON=function(e){var n="string"==typeof e?JSON.parse(e):e,r=n.providerId,i=n.signInMethod,o=n.pendingToken;return r&&i&&o&&r===i?new t(r,o):null},t._create=function(e,n){return new t(e,n)},t.prototype.buildRequest=function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}},t}(eA);!function(e){function t(t){return O(t.startsWith("saml."),"argument-error"),e.call(this,t)||this}(0,o.ZT)(t,e),t.credentialFromResult=function(e){return t.samlCredentialFromTaggedObject(e)},t.credentialFromError=function(e){return t.samlCredentialFromTaggedObject(e.customData||{})},t.credentialFromJSON=function(e){var t=ez.fromJSON(e);return O(t,"argument-error"),t},t.samlCredentialFromTaggedObject=function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return ez._create(r,n)}catch(e){return null}}}(eV),function(e){function t(){return e.call(this,"twitter.com")||this}(0,o.ZT)(t,e),t.credential=function(e,n){return eG._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})},t.credentialFromResult=function(e){return t.credentialFromTaggedObject(e)},t.credentialFromError=function(e){return t.credentialFromTaggedObject(e.customData||{})},t.credentialFromTaggedObject=function(e){var n=e._tokenResponse;if(!n)return null;var r=n.oauthAccessToken,i=n.oauthTokenSecret;if(!r||!i)return null;try{return t.credential(r,i)}catch(e){return null}},t.TWITTER_SIGN_IN_METHOD="twitter.com",t.PROVIDER_ID="twitter.com"}(ej);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ex=function(){function e(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}return e._fromIdTokenResponse=function(t,n,r,i){return void 0===i&&(i=!1),(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,ea._fromIdTokenResponse(t,r,i)];case 1:return[2,new e({user:o.sent(),providerId:eH(r),_tokenResponse:r,operationType:n})]}})})},e._forOperation=function(t,n,r){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(i){switch(i.label){case 0:return[4,t._updateTokensIfNecessary(r,!0)];case 1:return i.sent(),[2,new e({user:t,providerId:eH(r),_tokenResponse:r,operationType:n})]}})})},e}();function eH(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eW=function(e){function t(n,r,i,o){var s,a=this;return(a=e.call(this,r.code,r.message)||this).operationType=i,a.user=o,Object.setPrototypeOf(a,t.prototype),a.customData={appName:n.name,tenantId:null!==(s=n.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},a}return(0,o.ZT)(t,e),t._fromErrorAndOperation=function(e,n,r,i){return new t(e,n,r,i)},t}(a.ZR);function eK(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw eW._fromErrorAndOperation(e,n,t,r);throw n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eq(e,t,n){return void 0===n&&(n=!1),(0,o.mG)(this,void 0,void 0,function(){var r,i,a;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if((0,s.rh)(e.app))return[2,Promise.reject(N(e))];return[4,eK(e,r="signIn",t)];case 1:return i=o.sent(),[4,ex._fromIdTokenResponse(e,r,i)];case 2:if(a=o.sent(),n)return[3,4];return[4,e._updateCurrentUser(a.user)];case 3:o.sent(),o.label=4;case 4:return[2,a]}})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eB=function(){function e(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}return e._fromServerResponse=function(e,t){return"phoneInfo"in t?eZ._fromServerResponse(e,t):"totpInfo"in t?eX._fromServerResponse(e,t):S(e,"internal-error")},e}(),eZ=function(e){function t(t){var n=e.call(this,"phone",t)||this;return n.phoneNumber=t.phoneInfo,n}return(0,o.ZT)(t,e),t._fromServerResponse=function(e,n){return new t(n)},t}(eB),eX=function(e){function t(t){return e.call(this,"totp",t)||this}return(0,o.ZT)(t,e),t._fromServerResponse=function(e,n){return new t(n)},t}(eB);function eY(e,t,n){var r=this;return(0,s.rh)(e.app)?Promise.reject(N(e)):(function(e,t){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(n){return[2,eq(ew(e),t)]})})})((0,a.m9)(e),eF.credential(t,n)).catch(function(t){return(0,o.mG)(r,void 0,void 0,function(){return(0,o.Jh)(this,function(n){throw t.code==="auth/".concat("password-does-not-meet-requirements")&&/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(n){switch(n.label){case 0:if(!(t=ew(e))._getPasswordPolicyInternal())return[3,2];return[4,t._updatePasswordPolicy()];case 1:n.sent(),n.label=2;case 2:return[2]}})})}(e),t})})})}var e$=function(e,t,n){void 0===n&&(n={}),this.isNewUser=e,this.providerId=t,this.profile=n},eQ=function(e){function t(t,n,r,i){var o=e.call(this,t,n,r)||this;return o.username=i,o}return(0,o.ZT)(t,e),t}(e$);(0,o.ZT)(function(e,t){return e$.call(this,e,"facebook.com",t)||this},e$),(0,o.ZT)(function(e,t){return eQ.call(this,e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)||this},eQ),(0,o.ZT)(function(e,t){return e$.call(this,e,"google.com",t)||this},e$),(0,o.ZT)(function(e,t,n){return eQ.call(this,e,"twitter.com",t,n)||this},eQ);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var e0=function(){function e(e,t,n){this.type=e,this.credential=t,this.user=n}return e._fromIdtoken=function(t,n){return new e("enroll",t,n)},e._fromMfaPendingCredential=function(t){return new e("signin",t)},e.prototype.toJSON=function(){var e,t="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:((e={})[t]=this.credential,e)}},e.fromJSON=function(t){var n,r;if(null==t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null},e}();!function(){function e(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}e._fromError=function(t,n){var r=this,i=ew(t),s=n.customData._serverResponse,a=(s.mfaInfo||[]).map(function(e){return eB._fromServerResponse(i,e)});O(s.mfaPendingCredential,i,"internal-error");var u=e0._fromMfaPendingCredential(s.mfaPendingCredential);return new e(u,a,function(e){return(0,o.mG)(r,void 0,void 0,function(){var t,r,a;return(0,o.Jh)(this,function(c){switch(c.label){case 0:return[4,e._process(i,u)];case 1:switch(t=c.sent(),delete s.mfaInfo,delete s.mfaPendingCredential,r=(0,o.pi)((0,o.pi)({},s),{idToken:t.idToken,refreshToken:t.refreshToken}),n.operationType){case"signIn":return[3,2];case"reauthenticate":return[3,5]}return[3,6];case 2:return[4,ex._fromIdTokenResponse(i,n.operationType,r)];case 3:return a=c.sent(),[4,i._updateCurrentUser(a.user)];case 4:return c.sent(),[2,a];case 5:return O(n.user,i,"internal-error"),[2,ex._forOperation(n.user,n.operationType,r)];case 6:S(i,"internal-error"),c.label=7;case 7:return[2]}})})})},e.prototype.resolveSignIn=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(n){return t=e,[2,this.signInResolver(t)]})})}}(),function(){function e(e){var t=this;this.user=e,this.enrolledFactors=[],e._onReload(function(n){n.mfaInfo&&(t.enrolledFactors=n.mfaInfo.map(function(t){return eB._fromServerResponse(e.auth,t)}))})}e._fromUser=function(t){return new e(t)},e.prototype.getSession=function(){return(0,o.mG)(this,void 0,void 0,function(){var e,t;return(0,o.Jh)(this,function(n){switch(n.label){case 0:return t=(e=e0)._fromIdtoken,[4,this.user.getIdToken()];case 1:return[2,t.apply(e,[n.sent(),this.user])]}})})},e.prototype.enroll=function(e,t){return(0,o.mG)(this,void 0,void 0,function(){var n,r,i;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return n=e,[4,this.getSession()];case 1:return r=o.sent(),[4,ee(this.user,n._process(this.user.auth,r,t))];case 2:return i=o.sent(),[4,this.user._updateTokensIfNecessary(i)];case 3:return o.sent(),[2,this.user.reload()]}})})},e.prototype.unenroll=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t,n,r;return(0,o.Jh)(this,function(i){switch(i.label){case 0:return t="string"==typeof e?e:e.uid,[4,this.user.getIdToken()];case 1:n=i.sent(),i.label=2;case 2:var o;return i.trys.push([2,6,,7]),[4,ee(this.user,j(o=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",V(o,{idToken:n,mfaEnrollmentId:t})))];case 3:return r=i.sent(),this.enrolledFactors=this.enrolledFactors.filter(function(e){return e.uid!==t}),[4,this.user._updateTokensIfNecessary(r)];case 4:return i.sent(),[4,this.user.reload()];case 5:return i.sent(),[3,7];case 6:throw i.sent();case 7:return[2]}})})}}(),new WeakMap;var e2="@firebase/auth",e1="1.7.5",e4=function(){function e(e){this.auth=e,this.internalListeners=new Map}return e.prototype.getUid=function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null},e.prototype.getToken=function(e){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(t){switch(t.label){case 0:return this.assertAuthConfigured(),[4,this.auth._initializationPromise];case 1:if(t.sent(),!this.auth.currentUser)return[2,null];return[4,this.auth.currentUser.getIdToken(e)];case 2:return[2,{accessToken:t.sent()}]}})})},e.prototype.addAuthTokenListener=function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged(function(t){e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}},e.prototype.removeAuthTokenListener=function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())},e.prototype.assertAuthConfigured=function(){O(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")},e.prototype.updateProactiveRefresh=function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()},e}();function e3(e){(0,s.Xd)(new u.wA("auth",function(t,n){var r,i,o=n.options,s=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),c=s.options,h=c.apiKey,l=c.authDomain;O(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});var d=new ek(s,a,u,{apiKey:h,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eI(e)});return i=(Array.isArray(r=(null==o?void 0:o.persistence)||[])?r:[r]).map(ec),(null==o?void 0:o.errorMap)&&d._updateErrorMap(o.errorMap),d._initializeWithPersistence(i,null==o?void 0:o.popupRedirectResolver),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(e,t,n){e.getProvider("auth-internal").initialize()})),(0,s.Xd)(new u.wA("auth-internal",function(e){return new e4(ew(e.getProvider("auth").getImmediate()))},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,s.KN)(e2,e1,/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(e)),(0,s.KN)(e2,e1,"esm5")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var e5=function(){function e(e,t){this.storageRetriever=e,this.type=t}return e.prototype._isAvailable=function(){try{if(!this.storage)return Promise.resolve(!1);return this.storage.setItem(h,"1"),this.storage.removeItem(h),Promise.resolve(!0)}catch(e){return Promise.resolve(!1)}},e.prototype._set=function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()},e.prototype._get=function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)},e.prototype._remove=function(e){return this.storage.removeItem(e),Promise.resolve()},Object.defineProperty(e.prototype,"storage",{get:function(){return this.storageRetriever()},enumerable:!1,configurable:!0}),e}(),e6=function(e){function t(){var t,n,r=e.call(this,function(){return window.localStorage},"LOCAL")||this;return r.boundEventHandler=function(e,t){return r.onStorageEvent(e,t)},r.listeners={},r.localCache={},r.pollTimer=null,r.safariLocalStorageNotSynced=(ep(t=(0,a.z$)())||e_(t))&&function(){try{return!!(window&&window!==window.top)}catch(e){return!1}}(),r.fallbackToPolling=(void 0===n&&(n=(0,a.z$)()),e_(n)||em(n)||ey(n)||eg(n)||/windows phone/i.test(n)||ev(n)),r._shouldAllowMigration=!0,r}return(0,o.ZT)(t,e),t.prototype.forAllChangedKeys=function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),o=this.localCache[r];i!==o&&e(r,o,i)}},t.prototype.onStorageEvent=function(e,t){var n=this;if(void 0===t&&(t=!1),!e.key){this.forAllChangedKeys(function(e,t,r){n.notifyListeners(e,r)});return}var r=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!t)return}var o=function(){var e=n.storage.getItem(r);(t||n.localCache[r]!==e)&&n.notifyListeners(r,e)},s=this.storage.getItem(r);(0,a.w1)()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,10):o()},t.prototype.notifyListeners=function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++)(0,i[r])(t?JSON.parse(t):t)},t.prototype.startPolling=function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(function(){e.forAllChangedKeys(function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},1e3)},t.prototype.stopPolling=function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)},t.prototype.attachListener=function(){window.addEventListener("storage",this.boundEventHandler)},t.prototype.detachListener=function(){window.removeEventListener("storage",this.boundEventHandler)},t.prototype._addListener=function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)},t.prototype._removeListener=function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())},t.prototype._set=function(t,n){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,e.prototype._set.call(this,t,n)];case 1:return r.sent(),this.localCache[t]=JSON.stringify(n),[2]}})})},t.prototype._get=function(t){return(0,o.mG)(this,void 0,void 0,function(){var n;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,e.prototype._get.call(this,t)];case 1:return n=r.sent(),this.localCache[t]=JSON.stringify(n),[2,n]}})})},t.prototype._remove=function(t){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(n){switch(n.label){case 0:return[4,e.prototype._remove.call(this,t)];case 1:return n.sent(),delete this.localCache[t],[2]}})})},t.type="LOCAL",t}(e5),e7=function(e){function t(){return e.call(this,function(){return window.sessionStorage},"SESSION")||this}return(0,o.ZT)(t,e),t.prototype._addListener=function(e,t){},t.prototype._removeListener=function(e,t){},t.type="SESSION",t}(e5),e8=function(e){function t(t){var n=e.call(this,"custom","custom")||this;return n.params=t,n}return(0,o.ZT)(t,e),t.prototype._getIdTokenResponse=function(e){return eJ(e,this._buildIdpRequest())},t.prototype._linkToIdToken=function(e,t){return eJ(e,this._buildIdpRequest(t))},t.prototype._getReauthenticationResolver=function(e){return eJ(e,this._buildIdpRequest())},t.prototype._buildIdpRequest=function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t},t}(eA);function e9(e){return eq(e.auth,new e8(e),e.bypassAuthState)}function te(e){var t=e.auth,n=e.user;return O(n,t,"internal-error"),/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t,n){return void 0===n&&(n=!1),(0,o.mG)(this,void 0,void 0,function(){var r,i,a,u,c,h;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(r=e.auth,(0,s.rh)(r.app))return[2,Promise.reject(N(r))];i="reauthenticate",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,ee(e,eK(r,i,t,e),n)];case 2:return O((a=o.sent()).idToken,r,"internal-error"),O(u=$(a.idToken),r,"internal-error"),c=u.sub,O(e.uid===c,r,"user-mismatch"),[2,ex._forOperation(e,i,a)];case 3:throw(null==(h=o.sent())?void 0:h.code)==="auth/".concat("user-not-found")&&S(r,"user-mismatch"),h;case 4:return[2]}})})}(n,new e8(e),e.bypassAuthState)}function tt(e){return(0,o.mG)(this,void 0,void 0,function(){var t,n;return(0,o.Jh)(this,function(r){return t=e.auth,O(n=e.user,t,"internal-error"),[2,function(e,t,n){return void 0===n&&(n=!1),(0,o.mG)(this,void 0,void 0,function(){var r,i,s,a,u,c;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return i=ee,s=[e],u=(a=t)._linkToIdToken,c=[e.auth],[4,e.getIdToken()];case 1:return[4,i.apply(void 0,s.concat([u.apply(a,c.concat([o.sent()])),n]))];case 2:return r=o.sent(),[2,ex._forOperation(e,"link",r)]}})})}(n,new e8(e),e.bypassAuthState)]})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tn=function(){function e(e,t,n,r,i){void 0===i&&(i=!1),this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}return e.prototype.execute=function(){var e=this;return new Promise(function(t,n){return(0,o.mG)(e,void 0,void 0,function(){var e,r;return(0,o.Jh)(this,function(i){switch(i.label){case 0:this.pendingPromise={resolve:t,reject:n},i.label=1;case 1:return i.trys.push([1,4,,5]),e=this,[4,this.resolver._initialize(this.auth)];case 2:return e.eventManager=i.sent(),[4,this.onExecution()];case 3:return i.sent(),this.eventManager.registerConsumer(this),[3,5];case 4:return r=i.sent(),this.reject(r),[3,5];case 5:return[2]}})})})},e.prototype.onAuthEvent=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t,n,r,i,s,a,u,c,h;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(t=e.urlResponse,n=e.sessionId,r=e.postBody,i=e.tenantId,s=e.error,a=e.type,s)return this.reject(s),[2];u={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState},o.label=1;case 1:return o.trys.push([1,3,,4]),c=this.resolve,[4,this.getIdpTask(a)(u)];case 2:return c.apply(this,[o.sent()]),[3,4];case 3:return h=o.sent(),this.reject(h),[3,4];case 4:return[2]}})})},e.prototype.onError=function(e){this.reject(e)},e.prototype.getIdpTask=function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return e9;case"linkViaPopup":case"linkViaRedirect":return tt;case"reauthViaPopup":case"reauthViaRedirect":return te;default:S(this.auth,"internal-error")}},e.prototype.resolve=function(e){var t,n;t=this.pendingPromise,n="Pending promise was never set",t||L(n),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()},e.prototype.reject=function(e){var t,n;t=this.pendingPromise,n="Pending promise was never set",t||L(n),this.pendingPromise.reject(e),this.unregisterAndCleanUp()},e.prototype.unregisterAndCleanUp=function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()},e}(),tr=new Map,ti=function(e){function t(t,n,r){void 0===r&&(r=!1);var i=e.call(this,t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r)||this;return i.eventId=null,i}return(0,o.ZT)(t,e),t.prototype.execute=function(){return(0,o.mG)(this,void 0,void 0,function(){var t,n,r,i;return(0,o.Jh)(this,function(s){switch(s.label){case 0:if(t=tr.get(this.auth._key()))return[3,8];s.label=1;case 1:return s.trys.push([1,6,,7]),[4,function(e,t){return(0,o.mG)(this,void 0,void 0,function(){var n,r,i;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return n=el("pendingRedirect",t.config.apiKey,t.name),[4,(r=ec(e._redirectPersistence))._isAvailable()];case 1:if(!o.sent())return[2,!1];return[4,r._get(n)];case 2:return i="true"===o.sent(),[4,r._remove(n)];case 3:return o.sent(),[2,i]}})})}(this.resolver,this.auth)];case 2:if(!s.sent())return[3,4];return[4,e.prototype.execute.call(this)];case 3:return r=s.sent(),[3,5];case 4:r=null,s.label=5;case 5:return n=r,t=function(){return Promise.resolve(n)},[3,7];case 6:return i=s.sent(),t=function(){return Promise.reject(i)},[3,7];case 7:tr.set(this.auth._key(),t),s.label=8;case 8:return this.bypassAuthState||tr.set(this.auth._key(),function(){return Promise.resolve(null)}),[2,t()]}})})},t.prototype.onAuthEvent=function(t){return(0,o.mG)(this,void 0,void 0,function(){var n;return(0,o.Jh)(this,function(r){switch(r.label){case 0:if("signInViaRedirect"===t.type)return[2,e.prototype.onAuthEvent.call(this,t)];if("unknown"===t.type)return this.resolve(null),[2];if(!t.eventId)return[3,2];return[4,this.auth._redirectUserForId(t.eventId)];case 1:if(n=r.sent())return this.user=n,[2,e.prototype.onAuthEvent.call(this,t)];this.resolve(null),r.label=2;case 2:return[2]}})})},t.prototype.onExecution=function(){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(e){return[2]})})},t.prototype.cleanUp=function(){},t}(tn);function to(e,t){tr.set(e._key(),t)}function ts(e,t,n){return void 0===n&&(n=!1),(0,o.mG)(this,void 0,void 0,function(){var r,i,a;return(0,o.Jh)(this,function(o){switch(o.label){case 0:var u;if((0,s.rh)(e.app))return[2,Promise.reject(N(e))];return u=r=ew(e),i=t?ec(t):(O(u._popupRedirectResolver,u,"argument-error"),u._popupRedirectResolver),[4,new ti(r,i,n).execute()];case 1:if(!((a=o.sent())&&!n))return[3,4];return delete a.user._redirectEventId,[4,r._persistUserIfCurrent(a.user)];case 2:return o.sent(),[4,r._setRedirectUser(null,t)];case 3:o.sent(),o.label=4;case 4:return[2,a]}})})}var ta=encodeURIComponent("fac");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(){return window}function tc(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(function(e){return e}).join("-")}function th(e){var t=e.type,n=e.error;return"unknown"===t&&(null==n?void 0:n.code)==="auth/".concat("no-auth-event")}var tl=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.passiveListeners=new Set,t.initPromise=new Promise(function(e){t.resolveInialized=e}),t}return(0,o.ZT)(t,e),t.prototype.addPassiveListener=function(e){this.passiveListeners.add(e)},t.prototype.removePassiveListener=function(e){this.passiveListeners.delete(e)},t.prototype.resetRedirect=function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1},t.prototype.onEvent=function(t){return this.resolveInialized(),this.passiveListeners.forEach(function(e){return e(t)}),e.prototype.onEvent.call(this,t)},t.prototype.initialized=function(){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:return[4,this.initPromise];case 1:return e.sent(),[2]}})})},t}(function(){function e(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return e.prototype.registerConsumer=function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)},e.prototype.unregisterConsumer=function(e){this.consumers.delete(e)},e.prototype.onEvent=function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach(function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return th(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n},e.prototype.sendToConsumer=function(e,t){var n;if(e.error&&!th(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(R(this.auth,r))}else t.onAuthEvent(e)},e.prototype.isEventForConsumer=function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n},e.prototype.hasEventBeenHandled=function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(tc(e))},e.prototype.saveEventToCache=function(e){this.cachedEventUids.add(tc(e)),this.lastProcessedEventTime=Date.now()},e}());function td(e){return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(n){switch(n.label){case 0:return[4,ec(e6)._get(tf(e))];case 1:if(!(t=n.sent()))return[3,3];return[4,ec(e6)._remove(tf(e))];case 2:n.sent(),n.label=3;case 3:return[2,t]}})})}function tf(e){return el("authEvent",e.config.apiKey,e.name)}function tp(e){if(!(null==e?void 0:e.includes("?")))return{};var t=e.split("?");t[0];var n=t.slice(1);return(0,a.zd)(n.join("?"))}var tv=function(){function e(){this._redirectPersistence=e7,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ts,this._overrideRedirectResult=to}return e.prototype._initialize=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t,n;return(0,o.Jh)(this,function(r){return t=e._key(),(n=this.eventManagers.get(t))||(n=new tl(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),[2,n]})})},e.prototype._openPopup=function(e){S(e,"operation-not-supported-in-this-environment")},e.prototype._openRedirect=function(e,t,n,r){return(0,o.mG)(this,void 0,void 0,function(){var i,u,c;return(0,o.Jh)(this,function(h){var l,d,f,p,v,m,g,y,_,I,T,b,k,w,E;switch(h.label){case 0:return O("function"==typeof(null===(l=null==(T=tu())?void 0:T.universalLinks)||void 0===l?void 0:l.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),O(void 0!==(null===(d=null==T?void 0:T.BuildInfo)||void 0===d?void 0:d.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),O("function"==typeof(null===(v=null===(p=null===(f=null==T?void 0:T.cordova)||void 0===f?void 0:f.plugins)||void 0===p?void 0:p.browsertab)||void 0===v?void 0:v.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),O("function"==typeof(null===(y=null===(g=null===(m=null==T?void 0:T.cordova)||void 0===m?void 0:m.plugins)||void 0===g?void 0:g.browsertab)||void 0===y?void 0:y.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),O("function"==typeof(null===(I=null===(_=null==T?void 0:T.cordova)||void 0===_?void 0:_.InAppBrowser)||void 0===I?void 0:I.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"}),[4,this._initialize(e)];case 1:return[4,(i=h.sent()).initialized()];case 2:return h.sent(),i.resetRedirect(),tr.clear(),[4,this._originValidation(e)];case 3:return h.sent(),void 0===(b=r)&&(b=null),[4,(k=u={type:n,eventId:b,urlResponse:null,sessionId:function(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}(),postBody:null,tenantId:e.tenantId,error:R(e,"no-auth-event")},ec(e6)._set(tf(e),k))];case 4:return h.sent(),[4,function(e,t,n){var r;return(0,o.mG)(this,void 0,void 0,function(){var i,u,c;return(0,o.Jh)(this,function(h){switch(h.label){case 0:var l,d;return i=tu().BuildInfo,l=t.sessionId,d="AuthEvent did not contain a session ID",l||L(d),[4,function(e){return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(n){switch(n.label){case 0:return t=function(e){var t,n;if(t=/[0-9a-zA-Z]+/.test(e),n="Can only convert alpha-numeric strings",t||L(n),"undefined"!=typeof TextEncoder)return new TextEncoder().encode(e);for(var r=new Uint8Array(new ArrayBuffer(e.length)),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}(e),[4,crypto.subtle.digest("SHA-256",t)];case 1:return[2,Array.from(new Uint8Array(n.sent())).map(function(e){return e.toString(16).padStart(2,"0")}).join("")]}})})}(t.sessionId)];case 1:return u=h.sent(),c={},e_()?c.ibi=i.packageName:em()?c.apn=i.packageName:S(e,"operation-not-supported-in-this-environment"),i.displayName&&(c.appDisplayName=i.displayName),c.sessionId=u,[2,function(e,t,n,r,i,u){return(0,o.mG)(this,void 0,void 0,function(){var c,h,l,d,f,p,v,m,g,y,_,I;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(O(e.config.authDomain,e,"auth-domain-config-required"),O(e.config.apiKey,e,"invalid-api-key"),c={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:s.Jn,eventId:i},t instanceof eV)for(t.setDefaultLanguage(e.languageCode),c.providerId=t.providerId||"",(0,a.xb)(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters())),h=0,l=Object.entries(u||{});h<l.length;h++)f=(d=l[h])[0],p=d[1],c[f]=p;for(t instanceof ej&&(v=t.getScopes().filter(function(e){return""!==e})).length>0&&(c.scopes=v.join(",")),e.tenantId&&(c.tid=e.tenantId),g=0,y=Object.keys(m=c);g<y.length;g++)void 0===m[f=y[g]]&&delete m[f];return[4,e._getAppCheckToken()];case 1:var T;return I=(_=o.sent())?"#".concat(ta,"=").concat(encodeURIComponent(_)):"",[2,"".concat((T=e.config).emulator?G(T,"emulator/auth/handler"):"https://".concat(T.authDomain,"/").concat("__/auth/handler"),"?").concat((0,a.xO)(m).slice(1)).concat(I)]}})})}(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,c)]}})})}(e,u,t)];case 5:return[4,(w=h.sent(),E=tu().cordova,new Promise(function(e){E.plugins.browsertab.isAvailable(function(t){var n,r=null;t?E.plugins.browsertab.openUrl(w):r=E.InAppBrowser.open(w,(void 0===n&&(n=(0,a.z$)()),/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n))?"_blank":"_system","location=yes"),e(r)})}))];case 6:return c=h.sent(),[2,function(e,t,n){return(0,o.mG)(this,void 0,void 0,function(){var r,i;return(0,o.Jh)(this,function(o){switch(o.label){case 0:r=tu().cordova,i=function(){},o.label=1;case 1:return o.trys.push([1,,3,4]),[4,new Promise(function(o,s){var a=null;function u(){o();var e,t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout(function(){s(R(e,"redirect-cancelled-by-user"))},2e3))}function h(){(null==document?void 0:document.visibilityState)==="visible"&&c()}t.addPassiveListener(u),document.addEventListener("resume",c,!1),em()&&document.addEventListener("visibilitychange",h,!1),i=function(){t.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",h,!1),a&&window.clearTimeout(a)}})];case 2:return o.sent(),[3,4];case 3:return i(),[7];case 4:return[2]}})})}(e,i,c)]}})})},e.prototype._isIframeWebStorageSupported=function(e,t){throw Error("Method not implemented.")},e.prototype._originValidation=function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t,n;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return t=tu().BuildInfo,n={},e_()?n.iosBundleId=t.packageName:em()?n.androidPackageName=t.packageName:S(e,"operation-not-supported-in-this-environment"),[4,/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t){return void 0===t&&(t={}),(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(n){return[2,j(e,"GET","/v1/projects",t)]})})}(e,n)];case 1:return r.sent(),[2]}})})}(e)),this.originValidationPromises[t]},e.prototype.attachCallbackListeners=function(e,t){var n=this,r=tu(),i=r.universalLinks,s=r.handleOpenURL,a=r.BuildInfo,u=setTimeout(function(){return(0,o.mG)(n,void 0,void 0,function(){return(0,o.Jh)(this,function(n){switch(n.label){case 0:return[4,td(e)];case 1:return n.sent(),t.onEvent(tm()),[2]}})})},500),c=function(r){return(0,o.mG)(n,void 0,void 0,function(){var n,i;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return clearTimeout(u),[4,td(e)];case 1:return n=o.sent(),i=null,n&&(null==r?void 0:r.url)&&(i=function(e,t){var n,r,i,o,s,a,u=(r=(n=tp(t)).link?decodeURIComponent(n.link):void 0,i=tp(r).link,tp(o=n.deep_link_id?decodeURIComponent(n.deep_link_id):void 0).link||o||i||r||t);if(u.includes("/__/auth/callback")){var c=tp(u),h=c.firebaseError?function(e){try{return JSON.parse(e)}catch(e){return null}}(decodeURIComponent(c.firebaseError)):null,l=null===(a=null===(s=null==h?void 0:h.code)||void 0===s?void 0:s.split("auth/"))||void 0===a?void 0:a[1],d=l?R(l):null;return d?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:d,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:u,postBody:null}}return null}(n,r.url)),t.onEvent(i||tm()),[2]}})})};void 0!==i&&"function"==typeof i.subscribe&&i.subscribe(null,c);var h="".concat(a.packageName.toLowerCase(),"://");tu().handleOpenURL=function(e){return(0,o.mG)(n,void 0,void 0,function(){return(0,o.Jh)(this,function(t){if(e.toLowerCase().startsWith(h)&&c({url:e}),"function"==typeof s)try{s(e)}catch(e){console.error(e)}return[2]})})}},e}();function tm(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:R("no-auth-event")}}}}]);